<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø³ÛŒØ³ØªÙ… Ø®ÙˆØ¯Ø¢Ú¯Ø§Ù‡ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ - Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯</title>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      background: #0d0d0d;
      color: #00ff99;
      margin: 0;
      padding: 10px;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: #001a00;
      color: #00ff99;
      padding: 10px;
      text-align: center;
      font-size: 1.2em;
      border-bottom: 2px solid #00ff99;
      margin-bottom: 15px;
    }
    main {
      max-width: 800px;
      margin: 10px auto;
      padding: 15px;
      background: #1a1a1a;
      border-radius: 8px;
      flex: 1;
      display: flex;
      flex-direction: column;
      border: 1px solid #00ff99;
    }
    .chat-box {
      border: 1px solid #00ff99;
      border-radius: 8px;
      padding: 10px;
      height: 250px;
      overflow-y: auto;
      background: #0a0a0a;
      margin-bottom: 10px;
      flex: 1;
    }
    .message {
      margin: 5px 0;
      padding: 6px;
      border-radius: 6px;
      font-size: 14px;
      white-space: pre-line;
    }
    .user { background: #004d33; text-align: right; }
    .bot { background: #003300; text-align: left; }
    .input-box { display: flex; gap: 6px; margin-bottom: 10px; }
    .input-box input {
      flex: 1;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #00ff99;
      font-size: 14px;
      background: #001a00;
      color: #00ff99;
    }
    .input-box button {
      background: #003300;
      color: #00ff99;
      border: none;
      border-radius: 6px;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
      border: 1px solid #00ff99;
    }
    .input-box button:hover { background: #004d33; }
    .final-text {
      margin-top: 10px;
      background: #0a0a0a;
      padding: 8px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      border: 1px solid #00ff99;
    }
    .bank {
      margin-top: 15px;
      background: #1a1a1a;
      padding: 10px;
      border-radius: 8px;
      font-size: 13px;
      border: 1px solid #00ff99;
    }
    .bank-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      margin-bottom: 8px;
    }
    .bank-content { display: block; }
    .group { margin-bottom: 6px; }
    .group span { font-weight: bold; color: #00ff99; }
    .group-pos { color: #00ff99; }
    .group-neg { color: #ff3300; }
    .delete-btn {
      background: #660000;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 2px 5px;
      font-size: 11px;
      cursor: pointer;
      margin-right: 5px;
    }
    .delete-btn:hover { background: #990000; }
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background-color: #1a1a1a;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      max-width: 300px;
      border: 1px solid #00ff99;
    }
    .modal-content p { color: #00ff99; font-size: 14px; }
    .modal-content button {
      margin-top: 10px;
      padding: 6px 12px;
      cursor: pointer;
      background: #003300;
      color: #00ff99;
      border: 1px solid #00ff99;
      font-size: 13px;
    }
   
    /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø®Ø´ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù„Ù…Ù‡ */
    .save-word-container {
      display: flex;
      gap: 6px;
      align-items: center;
      margin-top: 10px;
      flex-wrap: wrap;
      font-size: 13px;
    }
    .save-word-container > div {
      white-space: nowrap;
    }
    .save-select {
      background: #1a1a1a;
      color: #00ff99;
      border: 1px solid #00ff99;
      padding: 6px;
      border-radius: 5px;
      font-size: 13px;
    }
   
    /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø®Ø´ Ø³Ø§Ø¹Øª */
    .time-section {
      margin-top: 12px;
      padding: 8px;
      background: #1a1a1a;
      border-radius: 6px;
      border: 1px solid #00ff99;
    }
    .time-display {
      font-size: 14px;
      color: #00ff99;
      margin-bottom: 8px;
      text-align: center;
    }
    .time-sentence {
      margin: 6px 0;
      padding: 6px;
      background: #0a0a0a;
      border-radius: 5px;
      border-left: 2px solid #00ff99;
      font-size: 13px;
    }
    .time-btn {
      background: #003300;
      color: #00ff99;
      border: 1px solid #00ff99;
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 8px;
      width: 100%;
      font-size: 13px;
    }
    .time-btn:hover {
      background: #004d33;
    }

    /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ */
    .advanced-section {
      margin-top: 12px;
      padding: 8px;
      background: #1a1a1a;
      border-radius: 6px;
      border: 1px solid #00ccff;
    }
    .advanced-title {
      font-size: 14px;
      color: #00ccff;
      margin-bottom: 8px;
      text-align: center;
    }
    .advanced-calculation {
      font-family: monospace;
      background: #0a0a0a;
      padding: 8px;
      border-radius: 5px;
      margin: 6px 0;
      font-size: 12px;
      color: #00ccff;
      border: 1px solid #00ccff;
    }
    .advanced-result {
      margin: 6px 0;
      padding: 8px;
      background: #0a0a0a;
      border-radius: 5px;
      border-left: 2px solid #00ccff;
      font-size: 13px;
      color: #00ccff;
    }
    .advanced-btn {
      background: #003333;
      color: #00ccff;
      border: 1px solid #00ccff;
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 8px;
      width: 100%;
      font-size: 13px;
    }
    .advanced-btn:hover {
      background: #004444;
    }

    /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø¬Ø¯ÙˆÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„ */
    .prime-table-container {
      margin-top: 15px;
      overflow-x: auto;
    }
    .prime-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }
    .prime-table th, .prime-table td {
      border: 1px solid #00ff99;
      padding: 5px;
      text-align: center;
    }
    .prime-table th {
      background: #002200;
    }
    .prime-table tr:nth-child(even) {
      background: #0a1a0a;
    }

    /* Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
    @media (max-width: 600px) {
      body { font-size: 13px; padding: 5px; }
      header { font-size: 1.1em; padding: 8px; margin-bottom: 10px; }
      main { margin: 5px; padding: 10px; }
      .chat-box { height: 200px; }
      .message { font-size: 13px; padding: 5px; }
      .input-box { flex-direction: column; }
      .input-box button { width: 100%; margin-top: 5px; }
      .save-word-container { flex-direction: column; align-items: stretch; }
      .save-word-container > div { margin-bottom: 5px; }
      .save-select { width: 100%; margin-bottom: 5px; }
      .prime-table { font-size: 10px; }
      .prime-table th, .prime-table td { padding: 3px; }
      .time-section, .advanced-section { padding: 6px; }
      .time-btn, .advanced-btn { font-size: 12px; padding: 8px; }
    }
    
    .info-box {
      background: #001a00;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 15px;
      border: 1px solid #00ff99;
      font-size: 13px;
    }
    
    /* Ø¨Ù‡Ø¨ÙˆØ¯ Ù†Ù…Ø§ÛŒØ´ Ù„Ù…Ø³ÛŒ */
    button, .delete-btn, .final-text {
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    
    /* Ø¨Ù‡Ø¨ÙˆØ¯ Ø§Ø³Ú©Ø±ÙˆÙ„ Ù„Ù…Ø³ÛŒ */
    .chat-box {
      -webkit-overflow-scrolling: touch;
    }
    
    /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ */
    .intelligent-response {
      margin: 10px 0;
      padding: 10px;
      background: #002200;
      border-radius: 6px;
      border: 1px solid #00cc66;
      font-size: 14px;
    }
    .chat-btn {
      background: #0066cc !important;
    }
    .chat-btn:hover {
      background: #0088ff !important;
    }
    
    /* ØªØ¨â€ŒÙ‡Ø§ */
    .tabs {
      display: flex;
      margin-bottom: 10px;
      border-bottom: 1px solid #00ff99;
    }
    .tab {
      padding: 8px 16px;
      cursor: pointer;
      background: #001a00;
      border: 1px solid #00ff99;
      border-bottom: none;
      border-radius: 5px 5px 0 0;
      margin-right: 5px;
    }
    .tab.active {
      background: #003300;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
  </style>
</head>
<body>
  <header>Ø³ÛŒØ³ØªÙ… Ø®ÙˆØ¯Ø¢Ú¯Ø§Ù‡ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ - Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ø²Ù…Ø§Ù†</header>
  <main>
    <div class="info-box">
      âœ¨ Ø³ÛŒØ³ØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡: ØªØ­Ù„ÛŒÙ„ Ø²Ù…Ø§Ù† â†’ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡ Ù‡Ø¯Ù â†’ ØªÙˆÙ„ÛŒØ¯ Û´ Ù¾Ø§Ø³Ø® Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù‡Ù…â€ŒÚ¯Ø±ÙˆÙ‡ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„ âœ¨
    </div>
   
    <div class="tabs">
      <div class="tab active" onclick="switchTab('analysis')">ØªØ­Ù„ÛŒÙ„ Ø®ÙˆØ¯Ø¢Ú¯Ø§Ù‡ÛŒ</div>
      <div class="tab" onclick="switchTab('chat')">Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯</div>
    </div>
   
    <div id="analysis-tab" class="tab-content active">
      <div class="chat-box" id="analysis-chat-box">
        <div class="message bot">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯! Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ù„Ù…Ù‡ ÛŒØ§ Ø¬Ù…Ù„Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ Ùˆ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Â«ØªØ­Ù„ÛŒÙ„ Ø®ÙˆØ¯Ø¢Ú¯Ø§Ù‡ÛŒÂ» Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.</div>
      </div>
     
      <div class="input-box">
        <input type="text" id="user-input" placeholder="ÛŒÚ© Ú©Ù„Ù…Ù‡ ÛŒØ§ Ø¬Ù…Ù„Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." onkeypress="if(event.key==='Enter') sendAwareness()">
        <button onclick="sendAwareness()">ØªØ­Ù„ÛŒÙ„ Ø®ÙˆØ¯Ø¢Ú¯Ø§Ù‡ÛŒ</button>
      </div>
     
      <div class="save-word-container">
        <div>Ù†ÙˆØ¹ Ú©Ù„Ù…Ù‡:</div>
        <select id="word-type" class="save-select">
          <option value="nouns">Ø§Ø³Ù…</option>
          <option value="conjunctions">Ø­Ø±Ù Ø±Ø¨Ø·</option>
          <option value="infinitives">Ù…ØµØ¯Ø±</option>
          <option value="adjectives">ØµÙØª</option>
          <option value="adverbs">Ù‚ÛŒØ¯</option>
          <option value="verbs">ÙØ¹Ù„</option>
        </select>
       
        <div>Ù‚Ø·Ø¨ÛŒØª:</div>
        <select id="word-polarity" class="save-select">
          <option value="pos">Ù…Ø«Ø¨Øª</option>
          <option value="neg">Ù…Ù†ÙÛŒ</option>
        </select>
       
        <button onclick="saveWord()" style="padding: 6px 10px; font-size: 13px;">Ø°Ø®ÛŒØ±Ù‡ Ú©Ù„Ù…Ù‡</button>
      </div>

      <div id="final-output" class="final-text" onclick="copyFinal()">Ø®Ø±ÙˆØ¬ÛŒ Ù†Ù‡Ø§ÛŒÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ø¸Ø§Ù‡Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯</div>
    </div>
   
    <div id="chat-tab" class="tab-content">
      <div class="chat-box" id="chat-chat-box">
        <div class="message bot">ğŸ”® Ø³ÛŒØ³ØªÙ… Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ ÙØ¹Ø§Ù„ Ø´Ø¯! Ù‡Ø± Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ ØªØ­Ù„ÛŒÙ„ Ø´Ø¯Ù‡ Ùˆ Ù¾Ø§Ø³Ø® Ø§Ø² Ú©Ù„Ù…Ø§Øª Ù‡Ù…â€ŒÚ¯roup Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>
      </div>
     
      <div class="input-box">
        <input type="text" id="chat-input" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯..." onkeypress="if(event.key==='Enter') sendIntelligentMessage()">
        <button onclick="sendIntelligentMessage()" class="chat-btn">Ø§Ø±Ø³Ø§Ù„ Ù‡ÙˆØ´Ù…Ù†Ø¯</button>
      </div>
      
      <div class="intelligent-response" id="intelligent-analysis" style="display:none;">
        ØªØ­Ù„ÛŒÙ„ Ùˆ Ù¾Ø§Ø³Ø® Ù‡ÙˆØ´Ù…Ù†Ø¯
      </div>
    </div>
   
    <div style="text-align:center; margin-top: 10px;">
      <button class="time-btn" onclick="generateAdvancedTimeResponse()">Ù¾Ø§Ø³Ø® Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù†</button>
    </div>

    <div class="time-section">
      <div class="time-display" id="current-time">Ø³Ø§Ø¹Øª Ø³ÛŒØ³ØªÙ…: ...</div>
      <div id="time-response" class="intelligent-response" style="display:none;">
        Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø²Ù…Ø§Ù†â€ŒÙ…Ø­ÙˆØ±
      </div>
    </div>

    <div class="advanced-section">
      <div class="advanced-title">Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¬Ù…Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„</div>
      <button class="advanced-btn" onclick="generateAdvancedSentences()">ØªÙˆÙ„ÛŒØ¯ Ø¬Ù…Ù„Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡</button>
     
      <div class="advanced-calculation" id="advanced-calculation">
        Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...
      </div>
     
      <div class="advanced-result" id="advanced-result">
        Ù†ØªØ§ÛŒØ¬ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...
      </div>
    </div>

    <div class="prime-table-container">
      <div class="advanced-title">Ø¬Ø¯ÙˆÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ø¬Ù…Ù„Ù‡â€ŒØ³Ø§Ø²ÛŒ</div>
      <table class="prime-table" id="prime-table">
        <thead>
          <tr>
            <th>Ø³Ø·Ø±</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û±</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û²</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û³</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û´</th>
            <th>Ú¯Ø±ÙˆÙ‡ Ûµ</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û¶</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û·</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û¸</th>
            <th>Ú¯Ø±ÙˆÙ‡ Û¹</th>
          </tr>
        </thead>
        <tbody id="prime-table-body">
          </tbody>
      </table>
    </div>

    <div class="bank" id="bank">
      <h3 class="bank-header" onclick="toggleBank()">
        <span>Ø¨Ø§Ù†Ú© Ú©Ù„Ù…Ø§Øª Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø±ÙˆÙ‡</span>
        <span id="toggle-icon">â–¼</span>
      </h3>
      <div id="bank-content" class="bank-content">
        <div id="groups"></div>
      </div>
    </div>
  </main>
 
  <div id="modal-overlay" class="modal-overlay">
    <div class="modal-content">
      <p id="modal-message"></p>
      <button onclick="hideModal()">Ø¨Ø§Ø´Ù‡</button>
    </div>
  </div>

  <script>
    // Ø¬Ø¯ÙˆÙ„ Ø§Ø±Ø²Ø´ Ø­Ø±ÙˆÙ
    const letterValues = {
      "Ø§":1,"Ø¢":1,"Ø£":1,"Ù":2,"ÛŒ":1,"Ù‰":1,"Ø¦":1, "Ù‡":1,
      "Ù":2,"Ù":2,
      "Ø¨":3,"Ù¾":3,"Ù…":3,
      "Ø±":5,"Ø²":5,"Ù„":5,
      "Øª":8,"Ø¯":8,"Ø°":8,"Ø·":8,"Ø¸":8,"Øµ":8,"Ø¶":8,"Ù†":8,
      "Ø¹":13,"Øº":13,"Ù‚":13,"Ø­":13,"Ø®":13,
      "Ø¬":21,"Ú†":21,"Ø³":21,"Ø´":21,"Ú˜":21,
      "Ù":34,"Ø«":34,
      "Ú©":55,"Ú¯":55,
      "Ùˆ":1,
      " ": 0,
      ".": 0,
    };

    // Ù…Ø¹Ø§Ù†ÛŒ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§
    const groupMeanings = {
      1: "ÛŒÚ¯Ø§Ù†Ú¯ÛŒ",
      2: "Ø¢ÙØ±ÛŒÙ†Ø´",
      3: "Ù…Ø§Ø¯ÛŒ",
      4: "Ù‡Ú˜Ù…ÙˆÙ†ÛŒØŒ Ø®Ø±Ø¯",
      5: "Ø´Ø§Ø¯ÛŒ",
      6: "Ø²Ù…Ø§Ù†",
      7: "Ø¹Ø´Ù‚ØŒ Ù‚Ø¯Ø³ÛŒ",
      8: "Ù‚Ø¯Ø±Øª",
      9: "Ù…Ø§ÙˆØ±Ø§ÛŒÛŒ"
    };

    // Ø¬Ø¯ÙˆÙ„ Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„ Ú¯Ø³ØªØ±Ø´ ÛŒØ§ÙØªÙ‡ Ø¨Ø±Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ØªØ§ Ø³Ø·Ø± 19 (Ø¬Ù…Ø¹ Ø¯Ø±ÙˆÙ†â€ŒØ±Ù‚Ù…ÛŒ 23:59) Ùˆ 9 Ú¯Ø±ÙˆÙ‡
    const primeNumbersByGroup = {
      1: [19, 37, 73, 109, 127, 163, 271, 307, 379, 397, 433, 487, 523, 541, 601, 619, 709, 733, 751],
      2: [11, 29, 47, 83, 101, 137, 173, 191, 227, 263, 281, 317, 353, 389, 443, 461, 479, 563, 581],
      3: [3, 21, 57, 93, 129, 147, 183, 219, 255, 291, 327, 363, 399, 435, 471, 507, 543, 579, 615],
      4: [13, 31, 67, 103, 139, 157, 193, 211, 229, 283, 337, 373, 409, 451, 469, 505, 523, 559, 595],
      5: [23, 41, 59, 113, 131, 149, 167, 239, 257, 293, 311, 347, 383, 419, 455, 491, 527, 563, 599],
      6: [6, 24, 60, 96, 132, 168, 204, 240, 276, 312, 348, 384, 420, 456, 492, 528, 564, 600, 636],
      7: [43, 61, 79, 97, 151, 223, 241, 277, 313, 331, 349, 367, 449, 467, 485, 503, 521, 575, 593],
      8: [17, 53, 71, 89, 107, 179, 197, 233, 251, 269, 359, 431, 449, 467, 485, 503, 521, 539, 557],
      9: [9, 27, 63, 99, 135, 171, 207, 243, 279, 315, 351, 387, 423, 459, 495, 531, 567, 603, 639]
    };
    
    const advancedWordTypes = ['nouns', 'conjunctions', 'infinitives', 'adjectives', 'adverbs', 'verbs'];

    let wordBank = {};
    let conversationMemory = [];

    // ================== Ø³ÛŒØ³ØªÙ… Ú†Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù¾ÛŒØ´Ø±ÙØªÙ‡ ==================

    // ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø± Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú¯Ø±ÙˆÙ‡ Ù‡Ø¯Ù
    function analyzeUserMessage(message) {
      const words = message.split(/\s+/).filter(word => word.length > 1);
      let totalSum = 0;
      
      for (let word of words) {
        const analysis = analyzeWord(word);
        totalSum += analysis.sum;
      }
      
      const messageGroup = digitSum(totalSum);
      
      return {
        words: words,
        totalSum: totalSum,
        messageGroup: messageGroup,
        meaning: groupMeanings[messageGroup] || "Ù†Ø§Ù…Ø´Ø®Øµ"
      };
    }

    // Ø³Ø§Ø®Øª Ù¾Ø§Ø³Ø® Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø±ÙˆÙ‡ Ù‡Ø¯Ù
    function generateIntelligentResponse(targetGroup) {
      if (!wordBank[targetGroup]) {
        return "Ù‡Ù†ÙˆØ² Ú©Ù„Ù…Ø§Øª Ú©Ø§ÙÛŒ Ø¯Ø± Ø§ÛŒÙ† Ú¯Ø±ÙˆÙ‡ Ù†Ø¯Ø§Ø±Ù…! Ù„Ø·ÙØ§Ù‹ Ú©Ù„Ù…Ø§Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.";
      }
      
      // Ø³Ø§Ø®Øª Ú†Ù‡Ø§Ø± Ù¾Ø§Ø³Ø® Ù…Ø®ØªÙ„Ù
      const responses = [];
      
      // Ù¾Ø§Ø³Ø® Û±: Ø³Ø§Ø®ØªØ§Ø± Ø³Ø§Ø¯Ù‡
      responses.push(generateSentenceFromGroup(targetGroup, [0, 1, 2, 3, 4, 5]));
      
      // Ù¾Ø§Ø³Ø® Û²: Ø³Ø§Ø®ØªØ§Ø± Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„
      responses.push(generatePrimeBasedSentence(targetGroup));
      
      // Ù¾Ø§Ø³Ø® Û³: Ø³Ø§Ø®ØªØ§Ø± ØªØ±Ú©ÛŒØ¨ÛŒ
      responses.push(generateMixedSentence(targetGroup));
      
      // Ù¾Ø§Ø³Ø® Û´: Ø³Ø§Ø®ØªØ§Ø± Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡
      responses.push(generateCreativeSentence(targetGroup));
      
      return responses;
    }

    // ØªÙˆÙ„ÛŒØ¯ Ø¬Ù…Ù„Ù‡ Ø§Ø² Ú¯Ø±ÙˆÙ‡ Ø®Ø§Øµ
    function generateSentenceFromGroup(targetGroup, structure) {
      const words = [];
      
      for (let i = 0; i < structure.length; i++) {
        const wordType = advancedWordTypes[structure[i] % advancedWordTypes.length];
        const word = getRandomWordFromGroup(targetGroup, wordType);
        words.push(word);
      }
      
      return words.join(" ");
    }

    // ØªÙˆÙ„ÛŒØ¯ Ø¬Ù…Ù„Ù‡ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„
    function generatePrimeBasedSentence(targetGroup) {
      const now = new Date();
      const primeIndex = (now.getMinutes() % 19);
      const primes = primeNumbersByGroup[targetGroup];
      const primeNumber = primes ? primes[primeIndex] : 1;
      
      let sentence = [];
      
      // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„Ù…Ø§Øª
      for (let i = 0; i < advancedWordTypes.length; i++) {
        const wordType = advancedWordTypes[i];
        const words = wordBank[targetGroup] ? wordBank[targetGroup][wordType] : [];
        if (words.length > 0) {
          const wordIndex = (primeNumber + i) % words.length;
          sentence.push(words[wordIndex]);
        }
      }
      
      return sentence.slice(0, 4).join(" "); // Ø­Ø¯Ø§Ú©Ø«Ø± Û´ Ú©Ù„Ù…Ù‡
    }

    // ØªÙˆÙ„ÛŒØ¯ Ø¬Ù…Ù„Ù‡ ØªØ±Ú©ÛŒØ¨ÛŒ
    function generateMixedSentence(targetGroup) {
      const structures = [
        [0, 1, 2],    // Ø§Ø³Ù… + Ø­Ø±Ù Ø±Ø¨Ø· + Ù…ØµØ¯Ø±
        [0, 3, 4],    // Ø§Ø³Ù… + ØµÙØª + Ù‚ÛŒØ¯
        [3, 0, 5],    // ØµÙØª + Ø§Ø³Ù… + ÙØ¹Ù„
        [0, 1, 3, 5]  // Ø§Ø³Ù… + Ø­Ø±Ù Ø±Ø¨Ø· + ØµÙØª + ÙØ¹Ù„
      ];
      
      const structure = structures[Math.floor(Math.random() * structures.length)];
      return generateSentenceFromGroup(targetGroup, structure);
    }

    // ØªÙˆÙ„ÛŒØ¯ Ø¬Ù…Ù„Ù‡ Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡
    function generateCreativeSentence(targetGroup) {
      const now = new Date();
      const seed = now.getSeconds();
      let sentence = [];
      
      // Ø§Ù„Ú¯ÙˆÛŒ Ú†Ø±Ø®Ø´ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ†ÙˆØ¹
      const pattern = [0, 3, 1, 4, 2, 5]; // Ø§Ø³Ù…, ØµÙØª, Ø­Ø±Ù Ø±Ø¨Ø·, Ù‚ÛŒØ¯, Ù…ØµØ¯Ø±, ÙØ¹Ù„
      
      for (let i = 0; i < 4; i++) {
        const typeIndex = (seed + i) % pattern.length;
        const wordType = advancedWordTypes[pattern[typeIndex]];
        const word = getRandomWordFromGroup(targetGroup, wordType);
        sentence.push(word);
      }
      
      return sentence.join(" ");
    }

    // Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù„Ù…Ù‡ ØªØµØ§Ø¯ÙÛŒ Ø§Ø² Ú¯Ø±ÙˆÙ‡
    function getRandomWordFromGroup(group, type) {
      if (wordBank[group] && wordBank[group][type] && wordBank[group][type].length > 0) {
        const words = wordBank[group][type];
        return words[Math.floor(Math.random() * words.length)];
      }
      return `[${getTypeFarsiName(type)}]`;
    }

    // Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯
    function sendIntelligentMessage() {
      const input = document.getElementById("chat-input");
      const chatBox = document.getElementById("chat-chat-box");
      const analysisDiv = document.getElementById("intelligent-analysis");
      const message = input.value.trim();
      
      if (!message) {
        showModal("Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ù¾ÛŒØ§Ù… ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.");
        return;
      }

      // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø±
      const userDiv = createMessageDiv("user", message);
      chatBox.appendChild(userDiv);

      // ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø±
      const analysis = analyzeUserMessage(message);
      
      // ØªÙˆÙ„ÛŒØ¯ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯
      const responses = generateIntelligentResponse(analysis.messageGroup);
      
      // Ù†Ù…Ø§ÛŒØ´ ØªØ­Ù„ÛŒÙ„
      let analysisText = `ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ§Ù… Ø´Ù…Ø§:\n`;
      analysisText += `Ú©Ù„Ù…Ø§Øª: ${analysis.words.join(', ')}\n`;
      analysisText += `Ø¬Ù…Ø¹ Ú©Ù„: ${analysis.totalSum} â†’ Ú¯Ø±ÙˆÙ‡ Ù‡Ø¯Ù: ${analysis.messageGroup} (${analysis.meaning})\n\n`;
      analysisText += `ğŸ¤– Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯:\n`;
      
      responses.forEach((response, index) => {
        analysisText += `${index + 1}. ${response}\n`;
      });
      
      analysisDiv.innerHTML = analysisText;
      analysisDiv.style.display = 'block';
      
      // Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§Ø³Ø® Ø¯Ø± Ú†Øª
      const botDiv = createMessageDiv("bot", `Ù¾Ø§Ø³Ø® Ø§Ø² Ú¯Ø±ÙˆÙ‡ ${analysis.messageGroup} (${analysis.meaning}):\n${responses[0]}`);
      chatBox.appendChild(botDiv);

      input.value = "";
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // ================== Ø³ÛŒØ³ØªÙ… Ù¾Ø§Ø³Ø® Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù† ==================

    function generateAdvancedTimeResponse() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes();
      
      updateCurrentTime();
      
      // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú¯Ø±ÙˆÙ‡ Ù‡Ø¯Ù Ø§Ø² Ø¬Ù…Ø¹ Ø§Ø±Ù‚Ø§Ù… Ø³Ø§Ø¹Øª Ùˆ Ø¯Ù‚ÛŒÙ‚Ù‡
      const hourStr = hours.toString().padStart(2, '0');
      const minuteStr = minutes.toString().padStart(2, '0');
      const timeDigits = (hourStr + minuteStr).split('').map(Number);
      const timeSum = timeDigits.reduce((a, b) => a + b, 0);
      const targetGroup = digitSum(timeSum);
      
      // ØªÙˆÙ„ÛŒØ¯ Ú†Ù‡Ø§Ø± Ù¾Ø§Ø³Ø®
      const responses = generateIntelligentResponse(targetGroup);
      
      const responseDiv = document.getElementById("time-response");
      responseDiv.innerHTML = `
        <strong>â° Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù† (${hourStr}:${minuteStr}):</strong><br>
        <div class="calculation">
          Ù…Ø­Ø§Ø³Ø¨Ù‡: ${timeDigits.join('+')} = ${timeSum} â†’ ${targetGroup}<br>
          Ú¯Ø±ÙˆÙ‡ Ø²Ù…Ø§Ù†ÛŒ: ${targetGroup} (${groupMeanings[targetGroup]})
        </div>
        <br>
        <strong>Û´ Ù¾Ø§Ø³Ø® ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡:</strong><br>
        ${responses.map((response, index) => `${index + 1}. ${response}`).join('<br>')}
      `;
      responseDiv.style.display = 'block';
    }

    // ================== ØªÙˆØ§Ø¨Ø¹ Ù¾Ø§ÛŒÙ‡ (Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±) ==================

    function loadData() {
        const storedBank = localStorage.getItem('wordBank');
        if (storedBank) {
            wordBank = JSON.parse(storedBank);
        } else {
            wordBank = {
              1: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              2: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              3: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              4: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              5: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              6: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              7: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              8: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] },
              9: { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] }
            };
        }
        
        const storedMemory = localStorage.getItem('conversationMemory');
        if (storedMemory) {
            conversationMemory = JSON.parse(storedMemory);
        }
        
        updateBankDisplay();
        updateCurrentTime();
        populatePrimeTable();
    }

    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
        });
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
        });
        
        document.querySelector(`.tab[onclick="switchTab('${tabName}')"]`).classList.add('active');
        document.getElementById(`${tabName}-tab`).classList.add('active');
    }

    function saveData() {
        localStorage.setItem('wordBank', JSON.stringify(wordBank));
        localStorage.setItem('conversationMemory', JSON.stringify(conversationMemory));
    }

    function digitSum(n) {
      if (typeof n !== 'number' || isNaN(n)) return 0;
      while (n > 9) {
        n = n.toString().split("").reduce((a,b)=>a+ +b,0);
      }
      return n;
    }
   
    function analyzeWord(word) {
      word = word.trim().replace(/['"Â«Â»]/g, "");
      let letters = word.split("");
      let values = letters.map(l => letterValues[l] || 0);
      let sum = values.reduce((a,b)=>a+b,0);
      let group = digitSum(sum);
      let meaning = groupMeanings[group] || "Ù†Ø§Ù…Ø´Ø®Øµ";

      return { word, values, sum, group, meaning };
    }

    function selfAwarenessAnalysis(text) {
      const words = text.split(/\s+/).filter(Boolean);
      let report = "";
      let final = [];
      for (let w of words) {
        let a = analyzeWord(w);
        report += `Ú©Ù„Ù…Ù‡: ${a.word}\nØ§Ø±Ø²Ø´â€ŒÙ‡Ø§: ${a.values.join("+")} = ${a.sum}\nØ¬Ù…Ø¹ Ø¯Ø±ÙˆÙ†â€ŒØ±Ù‚Ù…ÛŒ: ${a.group}\nÚ¯Ø±ÙˆÙ‡: ${a.meaning}\n---\n`;
        final.push(`${a.word}(${a.meaning})`);
      }
      return { report, finalSentence: final.join(" ") };
    }

    function getTypeFarsiName(type) {
        switch(type) {
            case 'nouns': return 'Ø§Ø³Ù…';
            case 'conjunctions': return 'Ø­Ø±Ù Ø±Ø¨Ø·';
            case 'infinitives': return 'Ù…ØµØ¯Ø±';
            case 'adjectives': return 'ØµÙØª';
            case 'adverbs': return 'Ù‚ÛŒØ¯';
            case 'verbs': return 'ÙØ¹Ù„';
            default: return type;
        }
    }

    function updateBankDisplay() {
      const groupsDiv = document.getElementById("groups");
      groupsDiv.innerHTML = "";
      const keys = Object.keys(wordBank).map(k=>parseInt(k,10)).sort((a,b)=>a-b);
     
      for(let g of keys) {
        const div = document.createElement("div");
        div.className = "group";
       
        const groupWords = wordBank[g];
        let hasWords = false;
        let groupHtml = "";
        
        const allTypes = [...advancedWordTypes, ...Object.keys(groupWords).filter(t => !advancedWordTypes.includes(t))];

        for (const type of allTypes) {
            if (groupWords[type] && groupWords[type].length > 0) {
                hasWords = true;
                const typeName = getTypeFarsiName(type);
                const wordsHtml = groupWords[type].map(word =>
                    `<span>${word} <button class="delete-btn" onclick="deleteWord(${g}, '${type}', '${word}')">Ø­Ø°Ù</button></span>`
                ).join(", ");
               
                groupHtml += `<br><span class="group-${type}">${typeName}:</span> ${wordsHtml}`;
            }
        }
       
        if (hasWords) {
            div.innerHTML = `
                <span>Ú¯Ø±ÙˆÙ‡ ${g} (${groupMeanings[g]}):</span>
                ${groupHtml}
                <hr>
            `;
            groupsDiv.appendChild(div);
        }
      }
     
      if (groupsDiv.innerHTML === "") {
        groupsDiv.innerHTML = "Ù‡ÛŒÚ† Ú©Ù„Ù…Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø¨Ø§Ù†Ú© ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.";
      }
    }

    function deleteWord(group, type, word) {
      if (confirm(`Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ "${word}" Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ`)) {
        const index = wordBank[group][type].indexOf(word);
        if (index > -1) {
          wordBank[group][type].splice(index, 1);
         
          let isEmpty = true;
          for (const t in wordBank[group]) {
            if (wordBank[group][t].length > 0) {
              isEmpty = false;
              break;
            }
          }
         
          if (isEmpty) {
            delete wordBank[group];
          }
         
          saveData();
          updateBankDisplay();
          showModal(`Ú©Ù„Ù…Ù‡ "${word}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯.`);
        }
      }
    }

    function showModal(message) {
      document.getElementById('modal-message').textContent = message;
      document.getElementById('modal-overlay').style.display = 'flex';
    }

    function hideModal() {
      document.getElementById('modal-overlay').style.display = 'none';
    }
   
    function toggleBank() {
      const bankContent = document.getElementById("bank-content");
      const toggleIcon = document.getElementById("toggle-icon");
      if (bankContent.style.display === "none") {
        bankContent.style.display = "block";
        toggleIcon.textContent = "â–¼";
      } else {
        bankContent.style.display = "none";
        toggleIcon.textContent = "â–¶";
      }
    }

    function createMessageDiv(className, textContent) {
      const div = document.createElement("div");
      div.className = `message ${className}`;
      div.textContent = textContent;
      return div;
    }

    function sendAwareness() {
      const input = document.getElementById("user-input");
      const chatBox = document.getElementById("analysis-chat-box");
      const text = input.value.trim();
      if(!text) {
        showModal("Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ù„Ù…Ù‡ ÛŒØ§ Ø¬Ù…Ù„Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.");
        return;
      }

      const userDiv = createMessageDiv("user", text);
      chatBox.appendChild(userDiv);

      const analysis = selfAwarenessAnalysis(text);

      const botDiv = createMessageDiv("bot", "ØªØ­Ù„ÛŒÙ„ Ø®ÙˆØ¯Ø¢Ú¯Ø§Ù‡ÛŒ:\n\n" + analysis.report);
      chatBox.appendChild(botDiv);

      document.getElementById("final-output").textContent = "Ø®Ø±ÙˆØ¬ÛŒ Ù†Ù‡Ø§ÛŒÛŒ: " + analysis.finalSentence;

      input.value = "";
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function saveWord() {
      const input = document.getElementById("user-input");
      const text = input.value.trim();
      const wordType = document.getElementById("word-type").value;
      const polarity = document.getElementById("word-polarity").value;
     
      if (!text) {
        showModal("Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ú©Ù„Ù…Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.");
        return;
      }

      const analysis = analyzeWord(text);
      const group = analysis.group;

      if (!wordBank[group]) {
         wordBank[group] = { nouns: [], conjunctions: [], infinitives: [], adjectives: [], adverbs: [], verbs: [] };
      }
     
      if (!wordBank[group][wordType].includes(text)) {
        wordBank[group][wordType].push(text);
        const typeName = getTypeFarsiName(wordType);
        showModal(`Ú©Ù„Ù…Ù‡ "${text}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ Ø¨Ø§Ù†Ú© ${typeName} Ú¯Ø±ÙˆÙ‡ ${group} Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯.`);
        saveData();
      } else {
        showModal(`Ú©Ù„Ù…Ù‡ "${text}" Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø§Ù†Ú© ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯.`);
      }

      updateBankDisplay();
      input.value = "";
    }

    function copyFinal() {
      const text = document.getElementById("final-output").textContent.replace("Ø®Ø±ÙˆØ¬ÛŒ Ù†Ù‡Ø§ÛŒÛŒ: ","");
      if (!text || text === 'Ø®Ø±ÙˆØ¬ÛŒ Ù†Ù‡Ø§ÛŒÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ø¸Ø§Ù‡Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯') {
        showModal("Ù‡Ù†ÙˆØ² Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.");
        return;
      }
      navigator.clipboard.writeText(text).then(() => {
        showModal("Ù…ØªÙ† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯!");
      }).catch(err => {
        showModal("Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ù…ØªÙ†: " + err);
      });
    }

    function updateCurrentTime() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes();
      document.getElementById('current-time').textContent = `Ø³Ø§Ø¹Øª Ø³ÛŒØ³ØªÙ…: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
    }

    function populatePrimeTable() {
      const tableBody = document.getElementById('prime-table-body');
      tableBody.innerHTML = '';
      const maxRows = 19;
     
      for (let i = 0; i < maxRows; i++) {
        const row = document.createElement('tr');
       
        const rowNumCell = document.createElement('td');
        rowNumCell.textContent = i + 1;
        row.appendChild(rowNumCell);
       
        for (let g = 1; g <= 9; g++) {
          const cell = document.createElement('td');
          const primes = primeNumbersByGroup[g];
          cell.textContent = primes && primes[i] !== undefined ? primes[i] : '-';
          row.appendChild(cell);
        }
        tableBody.appendChild(row);
      }
    }

    function selectWordFromGroup(group, wordType) {
      if (wordBank[group] && wordBank[group][wordType] && wordBank[group][wordType].length > 0) {
        const randomIndex = Math.floor(Math.random() * wordBank[group][wordType].length);
        return wordBank[group][wordType][randomIndex];
      }
      return "[Ú©Ù„Ù…Ù‡ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª]";
    }
    
    function generateTimeSentences() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes();
     
      updateCurrentTime();
     
      const sentence1 = generateSentence1(hours, minutes); 
      const sentence2 = generateSentence2(hours, minutes); 
      const sentence3 = generateSentence3(hours, minutes); 
     
      document.getElementById('sentence1').textContent = `Ø¬Ù…Ù„Ù‡ Ø§ÙˆÙ„ (Ù…Ø³ØªÙ‚ÛŒÙ…): ${sentence1}`;
      document.getElementById('sentence2').textContent = `Ø¬Ù…Ù„Ù‡ Ø¯ÙˆÙ… (Ù…Ø¹Ú©ÙˆØ³): ${sentence2}`;
      document.getElementById('sentence3').textContent = `Ø¬Ù…Ù„Ù‡ Ø³ÙˆÙ… (Û±Û°Û° Ø¯Ù‚ÛŒÙ‚Ù‡â€ŒØ§ÛŒ): ${sentence3}`;
      document.getElementById('time-sentences').style.display = 'block';
    }

    function generateSentence1(hours, minutes) {
      const hourStr = hours.toString().padStart(2, '0');
      const minuteStr = minutes.toString().padStart(2, '0');
     
      const digits = [
        parseInt(hourStr[0]),
        parseInt(hourStr[1]),
        parseInt(minuteStr[0]),
        parseInt(minuteStr[1])
      ].map(d => d === 0 ? 9 : d);

      const noun = selectWordFromGroup(digits[0], 'nouns');
      const conjunction = selectWordFromGroup(digits[1], 'conjunctions');
      const adverb = selectWordFromGroup(digits[2], 'adverbs');
      const verb = selectWordFromGroup(digits[3], 'verbs');
     
      return `${noun} ${conjunction} ${adverb} ${verb}`;
    }

    function generateSentence2(hours, minutes) {
      const hourStr = minutes.toString().padStart(2, '0');
      const minuteStr = hours.toString().padStart(2, '0');
     
      const digits = [
        parseInt(hourStr[0]),
        parseInt(hourStr[1]),
        parseInt(minuteStr[0]),
        parseInt(minuteStr[1])
      ].map(d => d === 0 ? 9 : d); 
     
      const noun = selectWordFromGroup(5, 'nouns');
      const adverb = selectWordFromGroup(5, 'adverbs');
      const conjunction = selectWordFromGroup(5, 'conjunctions');
      const verb = selectWordFromGroup(5, 'verbs');
     
      return `${noun} ${conjunction} ${adverb} ${verb}`;
    }

    function generateSentence3(hours, minutes) {
      const totalMinutes = (hours * 60) + ((hours > 0 ? hours - 1 : 0) * 40) + minutes;
      const newHour = Math.floor(totalMinutes / 100);
      const newMinute = totalMinutes % 100;
     
      const hourStr = newHour.toString().padStart(2, '0');
      const minuteStr = newMinute.toString().padStart(2, '0');
     
      const digits = [
        parseInt(hourStr[0]),
        parseInt(hourStr[1]),
        parseInt(minuteStr[0]),
        parseInt(minuteStr[1])
      ].map(d => d === 0 ? 9 : d); 
     
      const noun = selectWordFromGroup(digits[0], 'nouns');
      const conjunction = selectWordFromGroup(digits[1], 'conjunctions');
      const adverb = selectWordFromGroup(digits[2], 'adverbs');
      const verb = selectWordFromGroup(digits[3], 'verbs');
     
      return `${noun} ${conjunction} ${adverb} ${verb}`;
    }
    
    function getWordFromBankByPrime(prime, group, wordType) {
        const words = wordBank[group] ? wordBank[group][wordType] : [];
        if (words.length > 0 && prime) {
            const wordIndex = (prime - 1) % words.length;
            return words[wordIndex];
        }
        return `[${getTypeFarsiName(wordType)} Ú¯${group}]`;
    }

    function generateAdvancedSentences() {
      const now = new Date();
      const hours = now.getHours();
      const minutes = now.getMinutes();
      
      const timeStr = hours.toString().padStart(2, '0') + minutes.toString().padStart(2, '0');
      const digitsSum = timeStr.split("").reduce((a, b) => a + parseInt(b), 0);
      
      const rowNum = Math.max(1, digitsSum);
      const selectedRowIndex = (rowNum - 1) % 19; 
      
      const sentenceMap = {
          1: { type: 'nouns',        group: 1 },
          2: { type: 'conjunctions', group: 2 },
          3: { type: 'infinitives',  group: 3 },
          4: { type: 'adjectives',   group: 4 },
          5: { type: 'adverbs',      group: 5 },
          6: { type: 'verbs',        group: 6 }
      };
      
      let sentence = [];
      let calculationDetails = `Ø¬Ù…Ø¹ Ø¯Ø±ÙˆÙ†â€ŒØ±Ù‚Ù…ÛŒ Ø²Ù…Ø§Ù† (${timeStr}): ${rowNum}\n`;
      calculationDetails += `Ø³Ø·Ø± Ø§Ø¹Ø¯Ø§Ø¯ Ø§ÙˆÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡: ${selectedRowIndex + 1}\n\n`;

      for (let i = 1; i <= 6; i++) {
        const { type, group } = sentenceMap[i];
        
        const primes = primeNumbersByGroup[group];
        const primeNumber = primes ? primes[selectedRowIndex] : null; 
        
        const word = getWordFromBankByPrime(primeNumber, group, type);
        sentence.push(word);
        
        calculationDetails += 
          `${getTypeFarsiName(type)} (Ú¯Ø±ÙˆÙ‡ ${group}): Ø¹Ø¯Ø¯ Ø§ÙˆÙ„ ${primeNumber || 'N/A'} -> ${word}\n`;
      }
      
      const finalSentence = sentence.join(" ");

      document.getElementById('advanced-calculation').textContent = calculationDetails;
      
      document.getElementById('advanced-result').textContent = 
        `Ø¬Ù…Ù„Ù‡ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡: ${finalSentence}\n`;
    }

    window.onload = function() {
      loadData();
      setInterval(updateCurrentTime, 1000);
    };
  </script>
</body>
</html>
