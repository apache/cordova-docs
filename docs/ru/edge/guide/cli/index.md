---

license: Licensed to the Apache Software Foundation (ASF) under one or more contributor license agreements. See the NOTICE file distributed with this work for additional information regarding copyright ownership. The ASF licenses this file to you under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at

           http://www.apache.org/licenses/LICENSE-2.0
    
         Unless required by applicable law or agreed to in writing,
         software distributed under the License is distributed on an
         "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
         KIND, either express or implied.  See the License for the
         specific language governing permissions and limitations
         under the License.
    

---

# Интерфейс командной строки

Это руководство показывает, как создавать приложения и развернуть их в различных родной мобильных платформ с использованием `cordova` интерфейс командной строки (CLI). Этот инструмент позволяет создавать новые проекты, строить их на разных платформах и запускать их в эмуляторе. CLI можно также использовать для инициализации кода проекта, после чего вы можете использовать различные платформы SDK для их дальнейшего развития.

## Необходимые условия

Перед запуском любого средства командной строки, необходимо установить пакет SDK для каждой платформы, которую вы хотите цели. (См. платформа руководства для получения более подробной информации.)

Чтобы добавить поддержку или перестроить проект для любой платформы, вы должны запустить интерфейс командной строки из той же машине, который поддерживает платформы SDK. CLI поддерживает следующие комбинации:

*   iOS (Mac)
*   Android (Mac, Linux)
*   Ежевика 10 (Mac, Linux, Windows)
*   Windows Phone 7 (Windows)
*   Windows Phone 8 (Windows)
*   Windows 8 (Windows)
*   Firefox OS (Mac, Linux, Windows)

На Mac доступны через *терминал* приложения командной строки. На ПК он доступен как *командной строки* под *Аксессуары*.

Скорее, это запустить CLI из различных машин, тем больше это имеет смысл поддерживать удаленный репозиторий, активы которых вы тянуть местные рабочие каталоги.

Чтобы установить `cordova` командной строки средство, выполните следующие действия:

1.  Скачать и установить [Node.js][1]. После установки, вы должны иметь возможность ссылаться на `node` или `npm` в командной строке.

2.  Установить `cordova` утилита. В Unix, предваряя дополнительные `sudo` команда может быть необходимым для установки утилиты разработки в противном случае ограничено каталоги:
    
        $ sudo npm install -g cordova
        
    
    Журнал установки может приводить к ошибкам для любой удаленной платформы SDK. После установки, вы должны иметь возможность запускать `cordova` в командной строке.

 [1]: http://nodejs.org/

## Создание приложения

Перейдите в каталог, где вы сохранить ваш исходный код и выполнить команду следующего вида:

        $ cordova create hello com.example.hello HelloWorld
    

Это может занять некоторое время для выполнения команды, так что будьте терпеливы. Запустите `cordova -d` для просмотра сведений о прогрессе.

Первый аргумент указывает *Привет* каталог создан для вашего проекта. Ее `www` подкаталог домов Главная страница вашего приложения, наряду с различными ресурсами под `css` , `js` , и `img` , которые следуют общей веб развития именах файлов. `config.xml`Файл содержит важные метаданные, необходимые для создания и распространения приложения.

Другие два аргументы являются необязательными: `com.example.hello` аргумент предоставляет ваш проект с идентификатором обратного домена стиля и `HelloWorld` обеспечивает приложения отображаемый текст. Вы можете редактировать оба этих значения позже в `config.xml` файл.

## Добавить платформы

Все последующие команды должны быть запущены в каталоге проекта, или подкаталоги в пределах своей области:

        $ cd hello
    

Перед тем, как можно построить проект, необходимо указать набор целевых платформ. Ваша способность выполнить эти команды зависит от того, поддерживает ли ваш компьютер каждого пакета SDK, и есть ли у вас уже установлен каждого пакета SDK. Запуск любого из них от Mac:

        $ cordova platform add ios
        $ cordova platform add android
        $ cordova platform add blackberry10
        $ cordova platform add firefoxos
    

Выполните любую из этих из окна машины, где *wp* относится к различных версий операционной системы Windows Phone:

        $ cordova platform add wp7
        $ cordova platform add wp8
        $ cordova platform add windows8
        $ cordova platform add android
        $ cordova platform add blackberry10
        $ cordova platform add firefoxos
    

Выполните это, чтобы проверить ваш текущий набор платформ:

        $ cordova platforms ls
    

(Примечание `platform` и `platforms` команды являются синонимами.)

Выполните одну из следующих команд синонимом чтобы удалить платформу:

        $ cordova platform remove blackberry10
        $ cordova platform rm android
    

Выполнение команд для добавления или удаления платформ влияет на содержимое каталога *платформы* проекта, где каждый указанной платформе появляется как подкаталог. Исходный каталог *www* воспроизводится в подкаталоге каждой платформы, например появляясь в `platforms/ios/www` или `platforms/android/assets/www` . По умолчанию чтобы иметь возможность получить доступ ко всем API, Кордова настроен файл конфигурации каждой платформы.

Если вы хотите, можно использовать пакет SDK в этот момент чтобы открыть проект, созданный вами. Однако любые изменения, внесенные в проект в рамках SDK влияет производная набор активов, не кросс платформенный исходных файлов. Этот подход следует используйте, если вы просто хотите инициализировать проект. (См. платформа руководства для получения информации о том, как разрабатывать приложения в пределах каждого пакета SDK.) Читайте дальше, если вы хотите использовать инструменты командной строки для весь цикл разработки.

## Построение приложения

По умолчанию `cordova create` скрипт генерирует скелетных веб-приложение, Домашняя страница которого находится проекта `www/index.html` файл. Изменить это приложение, вы хотите, но любой инициализации должен быть указан как часть `deviceready` обработчика событий, ссылки по умолчанию`www/js/index.js`.

Выполните следующую команду для последовательного построения проекта:

        $ cordova build
    

Это создает платформенно зависимый код в рамках проекта `platforms` подкаталог. При необходимости можно ограничить сферу охвата каждой сборки для конкретных платформ:

        $ cordova build ios
    

`cordova build`Команда является краткой формой для следующее, что в этом примере также ориентирована на единую платформу:

        $ cordova prepare ios
        $ cordova compile ios
    

В этом случае, после запуска `prepare` , можно использовать Apple в Xcode SDK в качестве альтернативы изменить и скомпилировать платформенно зависимый код, генерирующий Кордова в пределах `platforms/ios` . Можно использовать тот же подход с других платформ SDK.

## Тестирование приложения на эмуляторе или устройстве

SDK для мобильных платформ, которые часто поставляются в комплекте с эмуляторами, выполняемых изображения устройства, так что вы можете запустить приложение на главном экране и посмотреть, как он взаимодействует со многими функциями платформы. Выполните команду следующего вида восстановить приложение и просмотреть его в пределах определенной платформы эмулятора:

        $ cordova emulate android
    

Некоторые мобильные платформы эмулировать конкретного устройства по умолчанию, такие как iPhone iOS проектов. Для других платформ необходимо сначала связать устройство с эмулятором. (См. платформа направляющие для деталей.) Например, вы можете сначала запустить `android` команда для запуска Android SDK, а затем запустить изображение конкретного устройства, которое запускает согласно его поведение по умолчанию:

![][2]

 [2]: img/guide/cli/android_emulate_init.png

Следующие вверх с `cordova emulate` команда обновляет образ эмулятора для отображения последние приложения, который теперь доступен для запуска на начальном экране:

![][3]

 [3]: img/guide/cli/android_emulate_install.png

Поочередно Подключите телефон к компьютеру и тестирование приложения непосредственно можно:

        $ cordova run android
    

Перед выполнением этой команды, необходимо настроить устройство для тестирования, следуя процедурам, которые различаются для каждой платформы. В случае Android вам придется включить опцию **USB отладки** в устройстве и возможно добавить драйвер USB в зависимости от развития далее. Смотрите подробную информацию о потребностях каждой платформы платформы руководства.

## Добавить плагин функции

При построении и просмотреть новый проект приложения по умолчанию, которое появляется не очень много. Вы можете изменить app в много способов, чтобы воспользоваться преимуществами стандартных веб-технологий, но для app тесно общаться с различными функциями на уровне устройства, вам нужно добавить плагины, которые обеспечивают доступ к основные API Cordova.

*Плагин* является немного дополнение кода, который предоставляет интерфейс для родной компонентов. Вы можете создать свой собственный плагин интерфейс, например, при разработке приложения гибрид, который смешивает Cordova WebView с собственными компонентами. (См. Встраивание WebViews и плагин развития руководство для деталей.) Чаще всего можно добавить плагин, чтобы включить один из Кордова в основных функций устройства уровня подробно описаны в справочнике по API. Список этих плагинов, включая дополнительные плагины, сообщества, можно найти на [plugins.cordova.io][4]. CLI можно использовать для поиска плагинов из этого реестра. Например, поиск для `bar` и `code` производит один результат, соответствующий оба термина как подстроки без учета регистра:

 [4]: http://plugins.cordova.io/

        $ cordova plugin search bar code
    
        com.phonegap.plugins.barcodescanner - Scans Barcodes
    

Поиск только `bar` урожайность и дополнительный результат:

        org.apache.cordova.statusbar - Cordova StatusBar Plugin
    

`cordova plugin add`Команды необходимо указать хранилище для код плагина. Ниже приведены примеры функций, которые вы могли бы добавить:

*   Информация основные устройства (устройства API):
    
        $ cordova plugin add org.apache.cordova.device
        

*   Сетевое подключение и батарея события:
    
        $ cordova plugin add org.apache.cordova.network-information
        $ cordova plugin add org.apache.cordova.battery-status
        

*   Акселерометр, компас и географического расположения:
    
        $ cordova plugin add org.apache.cordova.device-motion
        $ cordova plugin add org.apache.cordova.device-orientation
        $ cordova plugin add org.apache.cordova.geolocation
        

*   Камера, воспроизведение мультимедиа и захват:
    
        $ cordova plugin add org.apache.cordova.camera
        $ cordova plugin add org.apache.cordova.media-capture
        $ cordova plugin add org.apache.cordova.media
        

*   Доступ к файлам на устройстве или сети (файл API):
    
        $ cordova plugin add org.apache.cordova.file
        $ cordova plugin add org.apache.cordova.file-transfer
        

*   Уведомление через диалоговое окно или вибрации:
    
        $ cordova plugin add org.apache.cordova.dialogs
        $ cordova plugin add org.apache.cordova.vibration
        

*   Контакты:
    
        $ cordova plugin add org.apache.cordova.contacts
        

*   Глобализация:
    
        $ cordova plugin add org.apache.cordova.globalization
        

*   Экран-заставка:
    
        $ cordova plugin add org.apache.cordova.splashscreen
        

*   Открывать новые окна браузера (InAppBrowser):
    
        $ cordova plugin add org.apache.cordova.inappbrowser
        

*   Отладка консоли:
    
        $ cordova plugin add org.apache.cordova.console
        

Использование `plugin ls` (или `plugin list` , или `plugin` сама по себе) в настоящее время Просмотр установленных плагинов. Каждый отображает по его идентификатору:

        $ cordova plugin ls    # or 'plugin list'
        [ 'org.apache.cordova.console' ]
    

Чтобы удалить плагин, относятся к нему с тем же идентификатором, который появляется в списке. Например вот как бы удалить поддержку для консоли отладки версии:

        $ cordova plugin rm org.apache.cordova.console
        $ cordova plugin remove org.apache.cordova.console    # same
    

Можно пакет удалить или добавить плагины, указав более одного аргумента, для каждой команды:

        $ cordova plugin add org.apache.cordova.console org.apache.cordova.device
    

## Расширенный модуль параметры

При добавлении плагин, несколько вариантов позволяют указать где взять плагин. Приведенные выше примеры использования известного `registry.cordova.io` реестра и плагин определяется `id` :

        $ cordova plugin add org.apache.cordova.console
    

`id`Также могут включать номер версии плагина, добавленным после `@` характер. `latest`Версия — это псевдоним для самой последней версии. Например:

        $ cordova plugin add org.apache.cordova.console@latest
        $ cordova plugin add org.apache.cordova.console@0.2.1
    

Если плагин не зарегистрированы на `registry.cordova.io` , но расположен в другой репозиторий git, можно задать альтернативный URL-адрес:

        $ cordova plugin add https://github.com/apache/cordova-plugin-console.git
    

Приведенный выше пример git выбирает плагин с конца ветки master, но git ссылка на альтернативный например тег или ветви могут быть добавлены после `#` характер:

        $ cordova plugin add https://github.com/apache/cordova-plugin-console.git#r0.2.0
    

Если плагин (и его `plugin.xml` файл) находится в подкаталоге в git репо, вы можете определить его с `:` характер. Обратите внимание, что `#` персонаж по-прежнему необходимо:

        $ cordova plugin add https://github.com/someone/aplugin.git#:/my/sub/dir
    

Вы также можете объединить git-ref и подкаталога:

        $ cordova plugin add https://github.com/someone/aplugin.git#r0.0.1:/my/sub/dir
    

Кроме того, укажите локальный путь к папке плагина, который содержит `plugin.xml` файл:

        $ cordova plugin add ../my_plugin_dir
    

## Использование *слияния* для настройки каждой платформы

Хотя Cordova позволяет легко развертывать приложение на разных платформах, иногда необходимо добавить настройки. В этом случае, вы не хотите изменить исходные файлы в различных `www` каталогов в пределах верхнего уровня `platforms` каталог, потому что они регулярно вы заменили с верхнего уровня `www` кросс платформенной исходного каталога.

Вместо этого верхнего уровня `merges` Каталог предлагает место для указания активов для развертывания на определенных платформах. Каждый подкаталог платформа специфического в пределах `merges` отражает структуру каталогов `www` дерево исходных текстов, позволяет переопределить или добавить файлы, при необходимости. Например, вот как вы, возможно, использует `merges` чтобы увеличить размер шрифта по умолчанию для Android-устройств:

*   Редактировать `www/index.html` файл, добавив ссылку на дополнительные CSS-файл, `overrides.css` в этом случае:
    
        <link rel="stylesheet" type="text/css" href="css/overrides.css" />
        

*   При необходимости создать пустой `www/css/overrides.css` файл, который будет применяться для всех построений-андроида, предотвращая недостающий файл ошибка.

*   Создание `css` подкаталог внутри `merges/android` , затем добавить соответствующий `overrides.css` файл. Укажите CSS, который переопределяет размер шрифта 12 пунктов по умолчанию, указанный в `www/css/index.css` , например:
    
        body { font-size:14px; }
        

При повторном построении проекта, Android версия имеет размер пользовательского шрифта, в то время как другие остаются неизменными.

Вы можете также использовать `merges` для добавления файлов нет в оригинале `www` каталог. Например, приложение может включать *обратно кнопку* рисунок в интерфейс iOS, хранятся в `merges/ios/img/back_button.png` , в то время как Android версии вместо может захватить `backbutton` события из соответствующей аппаратной кнопки.

## Команды помощи

Cordova имеет несколько глобальных команд, которые могут помочь вам, если вы застряли или возникли проблемы. `help`Команда отображает все доступные команды Кордова и их синтаксис:

    $ cordova help
    $ cordova        # same
    

`info`Команда создает список потенциально полезных деталей, например, установленных платформ и плагины, SDK версии для каждой платформы и версии CLI и `node.js` :

    $ cordova info
    

Он представляет информацию на экран и перенаправляет выходные данные в локальной `info.txt` файла.

**Примечание**: в настоящее время, доступны только сведения о платформ iOS и Android.

## Обновление вашего проекта и Кордова

После установки `cordova` утилиты, вы можете всегда обновить его до последней версии, выполнив следующую команду:

        $ sudo npm update -g cordova
    

Используйте этот синтаксис для установки определенной версии:

        $ sudo npm install -g cordova@3.1.0
    

Запуск `cordova -v` чтобы посмотреть, какая версия в настоящее время работает. Запуск `npm
info` команда больше список, который включает в себя текущую версию и другие доступные версии номера:

        $ npm info cordova
    

Кордова 3.0 является первая версия для поддержки интерфейса командной строки, описанные в этом разделе. Если вы обновляете с версии 3.0, необходимо создать новый проект, как описано выше, а затем скопируйте старые приложения верхнего уровня `www` каталог. Там, где это применимо, далее сведения об обновлении до 3.0 доступны в платформе гидов. После обновления до `cordova` интерфейс командной строки и использование `npm update` в курсе, более длительных процедур, описанные там больше не актуальны.

Кордова 3.0 + могут по-прежнему требуют различных изменений структуры каталогов уровня проекта и другие зависимости. После запуска `npm` команда выше для обновления Cordova, сама, вам может понадобиться обеспечить вашего проекта ресурсы соответствовали требованиям последней версии. Выполните команды ниже для каждой платформы, вы создаете:

        $ cordova platform update android
        $ cordova platform update ios
        ...etc.