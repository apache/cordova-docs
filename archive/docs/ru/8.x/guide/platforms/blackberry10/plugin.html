<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
        
            
                Плагины для BlackBerry 10 - Apache Cordova
            
        
    </title>

    <link rel="SHORTCUT ICON" href="../../../../../../favicon.ico"/>

    

    
    

    <link rel="canonical" href="https://cordova.apache.org/docs/ru/latest/guide/platforms/blackberry10/plugin.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../../../../../../static/css/main.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../static/css/lib/syntax.css">
    <!-- Algolia Search CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
        var disqus_developer = 1; // this would set it to developer mode
    </script>

    <!-- JS -->
    <script defer type="text/javascript" src="../../../../../../static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="../../../../../../static/js/lib/bootstrap.min.js"></script>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-64283057-1', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    <header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://cordova.apache.org/"><img id="logo_top" src="../../../../../../static/img/cordova-logo-newbrand.svg"/></a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_center">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="https://cordova.apache.org/docs/en/latest/">Latest Documentation</a>
                        </li>
                        <li>
                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search '8.x' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>















<div class="docs">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Introduction
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../overview/index.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Create apps
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../cli/index.html">
                Create your first app
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../support/index.html">
                Platform support
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Develop for platforms
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../android/index.html">
                Android
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="home.html">
                Blackberry 10
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../ios/index.html">
                iOS
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/guide/platforms/osx/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../ubuntu/index.html">
                Ubuntu
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../win8/index.html">
                Windows
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../wp8/home.html">
                WP8
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="../../../platform_plugin_versioning_ref/index.html">
                Manage versions and platforms
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../config_ref/images.html">
                Customize icons
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../cordova/storage/storage.html">
                Store data
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/privacy/index.html">
                Manage privacy
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/security/index.html">
                Manage security
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/whitelist/index.html">
                Whitelisting
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Create plugins
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../hybrid/plugins/index.html">
                Create a plugin
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Develop for platforms
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../android/plugin.html">
                Android
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="this-page" href="plugin.html">
                Blackberry 10
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    

    <li>
        
            <a class="" href="../ios/plugin.html">
                iOS
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../win8/plugin.html">
                Windows
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../wp8/plugin.html">
                WP8
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="../../../plugin_ref/plugman.html">
                Use Plugman
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Advanced Topics
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../hybrid/webviews/index.html">
                Embed Cordova in native apps
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../next/index.html">
                Next Steps
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Reference
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../../config_ref/index.html">
                Config.xml
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../cordova/events/events.html">
                Events
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-cli/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/hooks/index.html">
                Hooks
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../plugin_ref/spec.html">
                Plugin.xml
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Plugin APIs
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-battery-status/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-camera/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-console/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-contacts/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-motion/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-orientation/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-dialogs/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file-transfer/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-geolocation/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-globalization/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-inappbrowser/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media-capture/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-network-information/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-splashscreen/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-vibration/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-statusbar/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-whitelist/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-legacy-whitelist/index.html">
                
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="page-content-container">
        <div class="page-content">
            <div class="content-header">

                <!-- ToC Dropdown (for XS and SM sizes only) -->
                <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                    <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        Содержание
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        




<li>
    <a class="" href="../../overview/index.html">
        Overview
    </a>
</li>










<li>
    <a class="" href="../../cli/index.html">
        Create your first app
    </a>
</li>




<li>
    <a class="" href="../../support/index.html">
        Platform support
    </a>
</li>







<li>
    <a class="" href="../android/index.html">
        Android
    </a>
</li>




<li>
    <a class="" href="home.html">
        Blackberry 10
    </a>
</li>




<li>
    <a class="" href="../ios/index.html">
        iOS
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/guide/platforms/osx/index.html">
        
    </a>
</li>




<li>
    <a class="" href="../ubuntu/index.html">
        Ubuntu
    </a>
</li>




<li>
    <a class="" href="../win8/index.html">
        Windows
    </a>
</li>




<li>
    <a class="" href="../wp8/home.html">
        WP8
    </a>
</li>







<li>
    <a class="" href="../../../platform_plugin_versioning_ref/index.html">
        Manage versions and platforms
    </a>
</li>




<li>
    <a class="" href="../../../config_ref/images.html">
        Customize icons
    </a>
</li>




<li>
    <a class="" href="../../../cordova/storage/storage.html">
        Store data
    </a>
</li>




<li>
    <a class="" href="../../appdev/privacy/index.html">
        Manage privacy
    </a>
</li>




<li>
    <a class="" href="../../appdev/security/index.html">
        Manage security
    </a>
</li>




<li>
    <a class="" href="../../appdev/whitelist/index.html">
        Whitelisting
    </a>
</li>










<li>
    <a class="" href="../../hybrid/plugins/index.html">
        Create a plugin
    </a>
</li>







<li>
    <a class="" href="../android/plugin.html">
        Android
    </a>
</li>




<li>
    <a class="this-page" href="plugin.html">
        Blackberry 10
    </a>
</li>




<li>
    <a class="" href="../ios/plugin.html">
        iOS
    </a>
</li>




<li>
    <a class="" href="../win8/plugin.html">
        Windows
    </a>
</li>




<li>
    <a class="" href="../wp8/plugin.html">
        WP8
    </a>
</li>







<li>
    <a class="" href="../../../plugin_ref/plugman.html">
        Use Plugman
    </a>
</li>










<li>
    <a class="" href="../../hybrid/webviews/index.html">
        Embed Cordova in native apps
    </a>
</li>




<li>
    <a class="" href="../../next/index.html">
        Next Steps
    </a>
</li>










<li>
    <a class="" href="../../../config_ref/index.html">
        Config.xml
    </a>
</li>




<li>
    <a class="" href="../../../cordova/events/events.html">
        Events
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-cli/index.html">
        
    </a>
</li>




<li>
    <a class="" href="../../appdev/hooks/index.html">
        Hooks
    </a>
</li>




<li>
    <a class="" href="../../../plugin_ref/spec.html">
        Plugin.xml
    </a>
</li>







<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-battery-status/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-camera/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-console/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-contacts/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-motion/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-orientation/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-dialogs/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file-transfer/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-geolocation/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-globalization/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-inappbrowser/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media-capture/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-network-information/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-splashscreen/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-vibration/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-statusbar/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-whitelist/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-legacy-whitelist/index.html">
        
    </a>
</li>










                    </ul>
                </div>

                
                

                    
                    
                    
                    
                    

                    
                    

                        
                        

                        </div><!-- Show warnings for special versions -->
            <!-- dev warning -->
            

            <!-- outdated warning -->
            
                <div class="alert docs-alert alert-danger" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    Эта версия документации устарела!
                    <a href="https://cordova.apache.org/docs/ru/latest/guide/platforms/blackberry10/plugin.html">
                        Нажмите здесь для последней выпущенной версии.
                    </a>
                </div>
            

            <!-- plugin version warning -->
            

            <div id="page-toc-source">
                <style type="text/css">
    /* Workaround for the spacing on the Russian /docs/ru/version/index.html pages */
    .docs .home .summary {
        height: 100px;
    }
    .docs #old-home ul li {
        height: 160px;
    }
</style>

<h1>Плагины для BlackBerry 10</h1>

<p>Этот раздел содержит сведения о том, как реализовать код родной плагин на платформе BlackBerry 10. Прежде чем читать это, прочтите секции &quot;Архитектура плагинов&quot; для обзор структуры плагина и его общего JavaScript интерфейса. Этот раздел продолжает демонстрировать образец плагина <em>echo</em>, который взаимодействует с WebView Cordova на стороне платформы и наоборот.</p>

<p>Плагин Echo просто возвращает любую строку, которую функция <code>window.echo</code> отправляет из JavaScript:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    window.echo = function(str, callback) {
        cordova.exec(callback, function(err) {
            callback('Nothing to echo.');
        }, "Echo", "echo", [str]);
    };
</code></pre></div>
<p>Cordova плагин для BlackBerry 10 содержит как JavaScript так и код платформы, которые общаются друг с другом через фреймворк, предоставляемый JNEXT. Каждый плагин должен также включать файл <code>plugin.xml</code>.</p>

<h2>Создание класса плагина</h2>

<p>Для создания основной части вашего плагина, откройте BlackBerry 10 NDK IDE и выберите <strong>File → New → BlackBerry Project → Native Extension → BlackBerry 10</strong>. Введите нужное имя и расположение проекта, затем нажмите кнопку <strong>Finish</strong>.</p>

<p>Проект, созданный в среде IDE содержит примеры кода для плагина памяти. Вы можете перезаписать или изменить эти файлы для реализации собственного функционала:</p>

<ul>
<li><p><code>*name*_js.hpp</code>: Заголовок C++ для кода JNEXT.</p></li>
<li><p><code>*name*_js.cpp</code>: Код C++ для JNEXT.</p></li>
</ul>

<p>Родной интерфейс для модуля JNEXT может быть просмотрен в файле заголовка плагина, расположенном в каталоге public проекта. К вашим услугам также константы и сервисных функций, доступных из кода платформы. Плагин должен быть производным от класса <code>JSExt</code>, который определен в <code>plugin.h</code> . То есть необходимо реализовать следующий класс:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    class JSExt
    {
    public:
        virtual ~JSExt() {};
        virtual string InvokeMethod( const string&amp; strCommand ) = 0;
        virtual bool CanDelete( void ) = 0;
    private:
        std::string m_id;
    };
</code></pre></div>
<p>Плаин должн включать заголовочный файл <code>plugin.h</code>. В примере <code>Echo</code>, вы используете <code>JSExt</code> как указано в следующем <code>echo_js.hpp</code> файле:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    #include "../public/plugin.h"
    #include &lt;string&gt;

    #ifndef ECHO_JS_H_
    #define ECHO_JS_H_

    class Echo : public JSExt
    {
    public:
        explicit Echo(const std::string&amp; id);
        virtual ~Echo();
        virtual std::string InvokeMethod(const std::string&amp; command);
        virtual bool CanDelete();
    private:
        std::string m_id;
    };

    #endif // ECHO_JS_H_
</code></pre></div>
<p><code>m_id</code> атрибут содержит <code>JNEXT</code> id для объекта, который передается в класс в качестве аргумента конструктора. Он необходим для стороны платформы чтобы вызывать события на стороне JavaScript. Метод <code>CanDelete</code> определяет, может ли быть удален объект определенный на строне платформы. Функция <code>InvokeMethod</code> вызывается в результате запроса со стороны JavaScript для вызова метода из данного конкретного объекта. Единственный аргумент этой функции является строка, передаваемая из JavaScript, который анализируется этим методом для определения, какой из методов собственного объекта должен быть выполнен. Эти методы реализуются в <code>echo_js.cpp</code> . Вот функция <code>InvokeMethod</code> для <code>Echo</code>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    string Echo::InvokeMethod(const string&amp; command) {

        //parse command and args from string
        int index = command.find_first_of(" ");
        string strCommand = command.substr(0, index);
        string strValue = command.substr(index + 1, command.length());

        // Determine which function should be executed
        if (strCommand == "echo") {
            return strValue;
        } else {
            return "Unsupported Method";
        }
    }
</code></pre></div>
<p>Плагин платформы должен также реализовывать следующие функции обратного вызова:</p>

<ul>
<li><p><code>extern char* onGetObjList( void );</code></p></li>
<li><p><code>extern JSExt* onCreateObject( const string&amp; strClassName, const string&amp; strObjId );</code></p></li>
</ul>

<p>Функция <code>onGetObjList</code> возвращает разделенный запятыми список классов, поддерживаемых JNEXT. JNEXT использует эту функцию для определения набора классов, которые могут быть созданы JNEXT. Плагин <code>Echo</code> реализует следующе в <code>echo_js.cpp</code>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    char* onGetObjList() {
        static char name[] = "Echo";
        return name;
    }
</code></pre></div>
<p>Функция <code>onCreateObject</code> принимает два параметра. Первый, это имя запрашиваемого класса который должен быть создан для стороны JavaScript, с допустимыми именами как те которые были возвращены из <code>onGetObjList</code> . Вторым параметром является уникальный идентификатор объекта класса. Этот метод возвращает указатель на созданный объект плагина. Плагин <code>Echo</code> реализует следующе в <code>echo_js.cpp</code>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    JSExt* onCreateObject(const string&amp; className, const string&amp; id) {
        if (className == "Echo") {
            return new Echo(id);
        }
        return NULL;
    }
</code></pre></div>
<h2>Создание плагина JavaScript</h2>

<p>Плагин должен содержать следующие файлы JavaScript:</p>

<ul>
<li><p><code>client.js</code>: Это файл считается клиентской стороной и содержит API для Cordova-приложения. API в вызовах <code>client.js</code> делает вызовы к <code>index.js</code> . API в <code>client.js</code> также связывает функции обратного вызова с событиями, которые вызывают эти функции.</p></li>
<li><p><code>index.js</code>: Cordova загружает <code>index.js</code> и делает его доступным через шлюз cordova.exec. Файл <code>client.js</code> делает вызовы к API в файле <code>index.js</code>, который в свою очередь делает вызов к JNEXT для взаимодействия со стороной платформы.</p></li>
</ul>

<p>Стороне клиента и сервера (<code>client.js</code> и <code>index.js</code>) взаимодействует через функцию <code>cordova.exec</code>. Файлу <code>client.js</code> нужно вызывать функцию <code>exec</code> и предоставить необходимые аргументы. Плагин <code>Echo</code> реализует следующее в файле <code>client.js</code>:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    var service = "org.apache.cordova.blackberry.echo",
        exec = cordova.require("cordova/exec");

    module.exports = {
        echo: function (data, success, fail) {
            exec(success, fail, service, "echo", { data: data });
        }
    };
</code></pre></div>
<p>Компонент <code>index.js</code> использует JNEXT для взаимодействия со стороной платформы. Присоединение функции конструктора с именем <code>Echo</code> к JNEXT позволяет выполнять следующие основные операции с помощью функции <code>init</code>:</p>

<ul>
<li><p>Укажите необходимый модуль, экспортируемые со стороны платформы. Имя необходимого модуля должно соответствовать имени файла общей библиотеки (<code>.so</code> файл):</p>
<div class="highlight"><pre><code class="language-" data-lang="">JNEXT.require("libecho")
</code></pre></div></li>
<li><p>Создайте объект используя полученный модуль и сохраните идентификатор, который был возвращен:</p>
<div class="highlight"><pre><code class="language-" data-lang="">self.m_id = JNEXT.createObject("libecho.Echo");
</code></pre></div>
<p>Когда приложение вызывает функцию <code>echo</code> из <code>client.js</code> , которая в свою очередь, вызывает функцию <code>echo</code> из <code>index.js</code>, откуда объект <code>PluginResult</code> отправляет данные как ответ обратно в <code>client.js</code> . Так как аргумент <code>args</code>, передаваемый в функции был преобразован с помощью <code>JSON.stringfy()</code> и закодирован как <code>URIcomponent</code>, вам необходимо вызвать следующее:</p>
<div class="highlight"><pre><code class="language-" data-lang="">data = JSON.parse(decodeURIComponent(args.data));
</code></pre></div></li>
</ul>

<p>Теперь вы можете отправить данные обратно, как показано ниже:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    module.exports = {
        echo: function (success, fail, args, env) {
            var result = new PluginResult(args, env),
            data = JSON.parse(decodeURIComponent(args.data)),
            response = echo.getInstance().echo(data);
            result.ok(response, false);
        }
    };
</code></pre></div>
<h2>Архитектура плагинов</h2>

<p>Вы можете разместить артефакты плагина, включая файл <code>plugin.xml</code>, исходные файлы JavaScript и C++ и двоичные файлы <code>.so</code> в любой структуре каталогов, до тех пор, пока вы правильно указываете расположение файлов в файле <code>plugin.xml</code>. Вот типичная структура:</p>

<p><strong><em>project_directory</em></strong> (раздел настроек plugin.xml)</p>

<ul>
<li>  <strong>www</strong> (&gt;client.js)</li>
<li>  <strong>src</strong> 

<ul>
<li>  <strong>blackberry10</strong> (&gt;index.js, <strong>native</strong> &gt;*.cpp, *.hpp)</li>
<li>  <strong>device</strong> (&gt;<em>двоичный файл</em> * .so)</li>
<li>  <strong>simulator</strong> (&gt;<em>двоичный файл</em> * .so)</li>
</ul></li>
</ul>

<p>В списке отображаются иерархические отношения между каталогами верхнего уровня. Скобки показывает содержимое данного каталога. Все имена каталогов отображаются полужирным шрифтом. Именам файлов предшествует знак <code>&gt;</code>.</p>

<h2>Файл <em>plugin.xml</em></h2>

<p>Файл <code>plugin.xml</code> содержит пространства имен расширения и другие метаданные. Настройте плагин <code>Echo</code> следующим образом:</p>
<div class="highlight"><pre><code class="language-" data-lang="">    &lt;plugin xmlns="http://www.phonegap.com/ns/plugins/1.0"
        id="org.apache.cordova.blackberry.echo"
        version="1.0.0"&gt;
        &lt;js-module src="www/client.js"&gt;
            &lt;merges target="navigator" /&gt;
        &lt;/js-module&gt;
        &lt;platform name="blackberry10"&gt;
            &lt;source-file src="src/blackberry10/index.js" /&gt;
            &lt;lib-file src="src/blackberry10/native/device/libecho.so" arch="device" /&gt;
            &lt;lib-file src="src/blackberry10/native/simulator/libecho.so" arch="simulator" /&gt;
            &lt;config-file target="www/config.xml" parent="/widget"&gt;
                &lt;feature name="org.apache.cordova.blackberry.echo" value="org.apache.cordova.blackberry.echo" /&gt;
            &lt;/config-file&gt;
        &lt;/platform&gt;
    &lt;/plugin&gt;
</code></pre></div>

            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://projects.apache.org/project.html?cordova">Apache Project Page</a>
                    </li>
                    <li>
                        <a href="http://www.apache.org/dyn/closer.cgi/cordova">Source Distribution</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">License</a>
                    </li>
                    <li>
                        <a href="https://cordova.apache.org/artwork">Artwork</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://github.com/apache?utf8=%E2%9C%93&amp;q=cordova-">Source Code</a></li>
                    <li><a target="_blank" href="https://issues.apache.org/jira/browse/CB/">Issue Tracker</a></li>
                    <li><a target="_blank" href="http://stackoverflow.com/questions/tagged/cordova">Stack Overflow</a></li>
                    <li><a href="https://cordova.apache.org/contact">Mailing List</a></li>
                    <li><a href="https://cordova.apache.org/contribute/nightly_builds.html">Nightly builds</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Apache Software Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="http://www.apache.org/">About ASF</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/foundation/thanks.html">Thanks</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/security/">Security</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help Cordova move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="https://cordova.apache.org/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/apachecordova" class="twitter-follow-button" data-show-count="false">Follow @apachecordova</a></p>
        <script async defer src="https://slack-cordova-io.herokuapp.com/slackin.js"></script>
    </div>
</div>
<p class="copyright_text">
    Copyright &copy; 2021 The Apache Software Foundation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
    Apache and the Apache feather logos are <a target="_blank" href="http://www.apache.org/foundation/marks/list/">trademarks</a> of The Apache Software Foundation.
    <br/>
    "Raleway" font used under license. For details see the <a href="https://cordova.apache.org/attributions/">attributions page</a>.
</p>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="../../../../../../static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="../../../../../../static/js/docs.js"></script>

    <script defer type="text/javascript" src="../../../../../../static/js/index.js"></script>
    <script defer type="text/javascript" src="../../../../../../static/js/twitter.js"></script>
    



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: '0a916ab198bd93d031aa70611271e42e',
        indexName: 'cordova',
        inputSelector: '#header-search-field',
        algoliaOptions: { 'facetFilters': ["version:  8.x", "language: ru"] }
    });
</script>

</body>
</html>
