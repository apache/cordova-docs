<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta name="description" content=" ">

    <title>
        
            
                Плагины Windows - Apache Cordova
            
        
    </title>

    <link rel="SHORTCUT ICON" href="../../../../../../favicon.ico"/>

    

    
    

    <link rel="canonical" href="https://cordova.apache.org/docs/ru/latest/guide/platforms/win8/plugin.html">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../../../../../../static/css/main.css">
    <link rel="stylesheet" type="text/css" href="../../../../../../static/css/lib/syntax.css">
    <!-- Algolia Search CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" />

    <!-- Fonts -->
    <!-- For attribution information, see www/attributions.html -->
    <link href='https://fonts.googleapis.com/css?family=Raleway:700,400,300,700italic,400italic,300italic' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
        var disqus_developer = 1; // this would set it to developer mode
    </script>

    <!-- JS -->
    <script defer type="text/javascript" src="../../../../../../static/js/lib/jquery-2.1.1.min.js"></script>
    <script defer type="text/javascript" src="../../../../../../static/js/lib/bootstrap.min.js"></script>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-64283057-1', 'auto');
    ga('send', 'pageview');
</script>

</head>

<body>
    <header>
    <a class="scroll-point pt-top" name="top"></a>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://cordova.apache.org/"><img id="logo_top" src="../../../../../../static/img/cordova-logo-newbrand.svg"/></a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="nav_bar_center">
                    <ul class="nav navbar-nav">
                        <li >
                            <a href="https://cordova.apache.org/docs/en/latest/">Latest Documentation</a>
                        </li>
                        <li>
                            <form class="navbar-form navbar-right" id="header-search-form" role="search">
                                <div class="input-group">
                                    
                                    <input id="header-search-field" type="text" placeholder="Search '8.x' docs..." class="form-control hidden-xs" autocomplete="off">
                                </div>
                            </form>
                        </li>
                    </ul>
                </div>
            </div><!--/.navbar-collapse -->
        </div>
    </nav>
    <div id="_fixed_navbar_spacer" style="padding-top:50px"></div>
</header>















<div class="docs">

    <!-- Table of Contents -->
    <div class="hidden-xs hidden-sm site-toc-container">
        <ul class="site-toc">
    

    <li>
        
            <span class="toc-section-heading">
                Introduction
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../overview/index.html">
                Overview
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Create apps
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../cli/index.html">
                Create your first app
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../support/index.html">
                Platform support
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Develop for platforms
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../android/index.html">
                Android
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../blackberry10/home.html">
                Blackberry 10
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../ios/index.html">
                iOS
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/guide/platforms/osx/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../ubuntu/index.html">
                Ubuntu
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="index.html">
                Windows
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../wp8/home.html">
                WP8
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="../../../platform_plugin_versioning_ref/index.html">
                Manage versions and platforms
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../config_ref/images.html">
                Customize icons
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../cordova/storage/storage.html">
                Store data
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/privacy/index.html">
                Manage privacy
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/security/index.html">
                Manage security
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/whitelist/index.html">
                Whitelisting
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Create plugins
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../hybrid/plugins/index.html">
                Create a plugin
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Develop for platforms
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../android/plugin.html">
                Android
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../blackberry10/plugin.html">
                Blackberry 10
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../ios/plugin.html">
                iOS
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="this-page" href="plugin.html">
                Windows
            </a>
            
                <span class="entry-highlight"></span>
            
        

        
        <div id="page-toc" class="page-toc"></div>

        
    </li>
    

    <li>
        
            <a class="" href="../wp8/plugin.html">
                WP8
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <a class="" href="../../../plugin_ref/plugman.html">
                Use Plugman
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Advanced Topics
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../hybrid/webviews/index.html">
                Embed Cordova in native apps
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../next/index.html">
                Next Steps
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Reference
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="../../../config_ref/index.html">
                Config.xml
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../cordova/events/events.html">
                Events
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-cli/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../appdev/hooks/index.html">
                Hooks
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="../../../plugin_ref/spec.html">
                Plugin.xml
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <span class="toc-section-heading">
                Plugin APIs
            </span>
        

        
        

        
        <ul class="site-toc">
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-battery-status/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-camera/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-console/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-contacts/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-motion/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-orientation/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-dialogs/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file-transfer/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-geolocation/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-globalization/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-inappbrowser/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media-capture/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-network-information/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-splashscreen/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-vibration/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-statusbar/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-whitelist/index.html">
                
            </a>
            
        

        
        

        
    </li>
    

    <li>
        
            <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-legacy-whitelist/index.html">
                
            </a>
            
        

        
        

        
    </li>
    
</ul>

        
    </li>
    
</ul>

        
    </li>
    
</ul>

    </div>

    <!-- Page content -->
    <div class="page-content-container">
        <div class="page-content">
            <div class="content-header">

                <!-- ToC Dropdown (for XS and SM sizes only) -->
                <div class="toc-dropdown dropdown visible-xs-block visible-sm-block">
                    <button class="btn btn-default dropdown-toggle" type="button" id="tocDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                        Содержание
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        




<li>
    <a class="" href="../../overview/index.html">
        Overview
    </a>
</li>










<li>
    <a class="" href="../../cli/index.html">
        Create your first app
    </a>
</li>




<li>
    <a class="" href="../../support/index.html">
        Platform support
    </a>
</li>







<li>
    <a class="" href="../android/index.html">
        Android
    </a>
</li>




<li>
    <a class="" href="../blackberry10/home.html">
        Blackberry 10
    </a>
</li>




<li>
    <a class="" href="../ios/index.html">
        iOS
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/guide/platforms/osx/index.html">
        
    </a>
</li>




<li>
    <a class="" href="../ubuntu/index.html">
        Ubuntu
    </a>
</li>




<li>
    <a class="" href="index.html">
        Windows
    </a>
</li>




<li>
    <a class="" href="../wp8/home.html">
        WP8
    </a>
</li>







<li>
    <a class="" href="../../../platform_plugin_versioning_ref/index.html">
        Manage versions and platforms
    </a>
</li>




<li>
    <a class="" href="../../../config_ref/images.html">
        Customize icons
    </a>
</li>




<li>
    <a class="" href="../../../cordova/storage/storage.html">
        Store data
    </a>
</li>




<li>
    <a class="" href="../../appdev/privacy/index.html">
        Manage privacy
    </a>
</li>




<li>
    <a class="" href="../../appdev/security/index.html">
        Manage security
    </a>
</li>




<li>
    <a class="" href="../../appdev/whitelist/index.html">
        Whitelisting
    </a>
</li>










<li>
    <a class="" href="../../hybrid/plugins/index.html">
        Create a plugin
    </a>
</li>







<li>
    <a class="" href="../android/plugin.html">
        Android
    </a>
</li>




<li>
    <a class="" href="../blackberry10/plugin.html">
        Blackberry 10
    </a>
</li>




<li>
    <a class="" href="../ios/plugin.html">
        iOS
    </a>
</li>




<li>
    <a class="this-page" href="plugin.html">
        Windows
    </a>
</li>




<li>
    <a class="" href="../wp8/plugin.html">
        WP8
    </a>
</li>







<li>
    <a class="" href="../../../plugin_ref/plugman.html">
        Use Plugman
    </a>
</li>










<li>
    <a class="" href="../../hybrid/webviews/index.html">
        Embed Cordova in native apps
    </a>
</li>




<li>
    <a class="" href="../../next/index.html">
        Next Steps
    </a>
</li>










<li>
    <a class="" href="../../../config_ref/index.html">
        Config.xml
    </a>
</li>




<li>
    <a class="" href="../../../cordova/events/events.html">
        Events
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-cli/index.html">
        
    </a>
</li>




<li>
    <a class="" href="../../appdev/hooks/index.html">
        Hooks
    </a>
</li>




<li>
    <a class="" href="../../../plugin_ref/spec.html">
        Plugin.xml
    </a>
</li>







<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-battery-status/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-camera/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-console/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-contacts/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-motion/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-device-orientation/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-dialogs/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-file-transfer/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-geolocation/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-globalization/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-inappbrowser/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-media-capture/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-network-information/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-splashscreen/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-vibration/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-statusbar/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-whitelist/index.html">
        
    </a>
</li>




<li>
    <a class="" href="https://cordova.apache.org/docs/ru/8.x/reference/cordova-plugin-legacy-whitelist/index.html">
        
    </a>
</li>










                    </ul>
                </div>

                
                

                    
                    
                    
                    
                    

                    
                    

                        
                        

                        </div><!-- Show warnings for special versions -->
            <!-- dev warning -->
            

            <!-- outdated warning -->
            
                <div class="alert docs-alert alert-danger" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    Эта версия документации устарела!
                    <a href="https://cordova.apache.org/docs/ru/latest/guide/platforms/win8/plugin.html">
                        Нажмите здесь для последней выпущенной версии.
                    </a>
                </div>
            

            <!-- plugin version warning -->
            

            <div id="page-toc-source">
                <style type="text/css">
    /* Workaround for the spacing on the Russian /docs/ru/version/index.html pages */
    .docs .home .summary {
        height: 100px;
    }
    .docs #old-home ul li {
        height: 160px;
    }
</style>

<h1>Плагины Windows</h1>

<p>Этот раздел содержит сведения о том, как реализовать плагин для использования в приложении Магазин Windows. Прежде чем читать это, увидеть приложения плагины обзор структуры плагина и его общий интерфейс JavaScript. Этот раздел продолжает демонстрировать образец <em>эхо</em> плагин, который общается с webview Кордова на родной платформе и обратно.</p>

<p>Важно отметить, что Windows поддерживает разработку непосредственно в Javascript, что означает «родной» части в только в особых случаях.</p>

<h2>Создание плагина Windows в JavaScript</h2>

<p>Эти инструкции предназначены для создания чистой плагин JavaScript. Понимая это имеет решающее значение для понимания того, как для добавления управляемого/машинного биты.</p>

<p>Кордова Windows плагины являются по существу тонкой оболочкой вокруг существующих WinJS предоставляет функции, но предполагая, что вы хотите определить ваш JS общий интерфейс для нескольких устройств, вы обычно будет иметь 1 JS файл, предоставляющий API.</p>
<div class="highlight"><pre><code class="language-" data-lang="">// inside file echoplugin.js
var EchoPlugin = {
    // the echo function calls successCallback with the provided text in strInput
    // if strInput is empty, it will call the errorCallback
    echo:function(successCallback, errorCallback, strInput) {
        cordova.exec(successCallback,errorCallback,"EchoPlugin","echo",[strInput]);
    }
}
</code></pre></div>
<h2>Внутри Кордова исп на Windows</h2>

<p>Функция cordova.exec определена по-разному на каждой платформе, это потому, что каждая платформа имеет его собственный способ общения между js код приложения и код родной оболочки. Но в случае Windows, нет никаких собственную оболочку, поэтому вызов exec существует для обеспечения согласованности. Вашу работу только плагин js непосредственно в EchoPlugin.echo, можно сделать что-то вроде:</p>
<div class="highlight"><pre><code class="language-" data-lang="">// inside file echoplugin.js ( this is what NOT to do if you want to reuse the JS API cross platform )
var EchoPlugin = {
    echo:function(successCallback,errorCallback,strInput) {
        if(!strInput || !strInput.length) {
            errorCallback("Error, something was wrong with the input string. =&gt;" + strInput);
        }
        else {
            successCallback(strInput + "echo");
        }
    }
}
</code></pre></div>
<p>Это будет может работать нормально, однако это означает, что вам понадобится echoPlugin.js разные версии для разных платформ, и возможно вы могли бы проблемы несоответствия в вашей реализации. Как правило мы решили имитировать native API внутри cordova.exec на Windows, так что мы могли бы запустить тот же код JS и не требуется переписывать его на платформе и также воспользоваться любой проверки параметров, или другой общий код, предоставляемых разработчиками, которые работали на других платформах.</p>

<h2>Кордова исп прокси</h2>

<p>В Windows cordova предоставляет прокси-сервер, который можно использовать для регистрации объекта, который будет обрабатывать все cordova.exec вызовы API.</p>

<p>Например если вы хотели предоставить реализацию для акселерометра API, вы могли бы сделать это:</p>

<p>cordova.commandProxy.add («Акселерометр», {начало: function() {/ / ваш код здесь...} / /... и на остальной части API здесь});</p>

<p>Так что в нашем случае, мы будем считать что код в echoplugin.js обработки кросс-платформенный соответствующих JavaScript и мы можем просто написать прокси для Windows</p>
<div class="highlight"><pre><code class="language-" data-lang="">// in file echopluginProxy.js
cordova.commandProxy.add("EchoPlugin",{
    echo:function(successCallback,errorCallback,strInput) {
        if(!strInput || !strInput.length) {
            errorCallback("Error, something was wrong with the input string. =&gt;" + strInput);
        }
        else {
            successCallback(strInput + "echo");
        }
    }
});
</code></pre></div>
<p>Определение плагин</p>

<p>Если мы хотим, чтобы пользователи нашего плагина, чтобы иметь возможность легко установить наш плагин, нам нужно будет определить ее согласно как PlugMan определяет плагины. Подробнее об этом в <a href="https://cordova.apache.org/docs/ru/8.x/guide/platforms/win8/plugin_ref_spec.md.html#Plugin%20Specification">Спец плагин</a></p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;plugin</span> <span class="na">xmlns=</span><span class="s">"http://apache.org/cordova/ns/plugins/1.0"</span>
    <span class="na">id=</span><span class="s">"com.risingj.echoplugin"</span>
    <span class="na">version=</span><span class="s">"0.1.0"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;js-module</span> <span class="na">src=</span><span class="s">"www/echoplugin.js"</span> <span class="na">name=</span><span class="s">"echoplugin"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;clobbers</span> <span class="na">target=</span><span class="s">"window.echoplugin"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/js-module&gt;</span>

    <span class="c">&lt;!-- windows --&gt;</span>
    <span class="nt">&lt;platform</span> <span class="na">name=</span><span class="s">"windows"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;js-module</span> <span class="na">src=</span><span class="s">"src/windows/echopluginProxy.js"</span> <span class="na">name=</span><span class="s">"EchoProxy"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;merges</span> <span class="na">target=</span><span class="s">""</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/js-module&gt;</span>
    <span class="nt">&lt;/platform&gt;</span>

    <span class="c">&lt;!-- other platforms --&gt;</span>

<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div>
<p>Это дает нам рабочую Windows JavaScript плагин, который использует общий файл (echoplugin.js) и использует прокси-сервер для обеспечения Windows только часть осуществления (echopluginProxy.js). Так как мы добавим управляемого/машинного кода к этому? Ну, мы собираемся начать то же самое, только разница будет, что мы делаем внутри в echopluginProxy методы.</p>

<h1>Как WinJS получает доступ управляемого/машинного кода</h1>

<p>В Windows, WinJS, авторские приложения способны взаимодействовать с машинным кодом, это между ОП доступен для компонентов Среда выполнения Windows. Детали, многочисленны, и это руководство будет охватывать только основы. Корпорация Майкрософт предоставляет гораздо больше информации <a href="http://msdn.microsoft.com/en-us/library/windows/apps/hh441569.aspx">здесь</a>.</p>

<p>Когда вы создаете ваш компонент Среда выполнения Windows, любой класс, который определяется как «общественного ссылочного класса sealed» считается «активируемого класса» и будет можно вызывать из JavaScript.</p>
<div class="highlight"><pre><code class="language-" data-lang="">// in your header file .h
namespace EchoRuntimeComponent
{
    public ref class EchoPluginRT sealed 
    {
        public:
        static Platform::String^ Echo(Platform::String^ input);
    }
}

// in the implementation file .cpp
using namespace EchoRuntimeComponent;
using namespace Platform;

Platform::String^ EchoPluginRT::Echo(Platform::String^ input)
{
    if(input-&gt;IsEmpty()) 
    {
        return "Error: input string is empty.";
    }
    else
    {
        return input-&gt;ToString() + "echo";
    }
}
</code></pre></div>
<p>Теперь, чтобы для нас, чтобы вызывать машинный код, мы используем пространство имен, имя класса и lowerCamelCase метод, который мы называем.</p>

<p>var res = EchoRuntimeComponent.EchoPluginRT.echo(&quot;boom&quot;); Переезд это наш файл echopluginProxy.js, мы получаем это:</p>
<div class="highlight"><pre><code class="language-" data-lang="">// in file echopluginProxy.js
cordova.commandProxy.add("EchoPlugin",{
    echo:function(successCallback,errorCallback,strInput) {
        var res = EchoRuntimeComponent.EchoPluginRT.echo(strInput);
        if(res.indexOf("Error") == 0) {
            errorCallback(res);
        }
        else {
            successCallback(res);
        }
    }
});
</code></pre></div>
<p>И вот это, у нас есть конец в конец при поддержке C++ js вызываемой плагин для использования в Apache Cordova Windows!</p>

<h1>Некоторые технические примечания:</h1>

<ul>
<li>  обратный вызов обычно является асинхронной, так вызовом обратного вызова сразу ожидается, вероятно, не вызывающим. На практике если вызов не async, следует по крайней мере использовать javascript таймаут заставить называться асинхронного обратного вызова.</li>
<li>  Активируемых классов можно сделать все виды awesome, как событие, диспетчеризации, асинхронных обратных вызовов, передавая собственные типы объектов, массивы, коллекции, перегруженные методы и многое другое. Я рекомендую, что вы делаете вашу домашнюю работу.</li>
<li>  Если вы будете придерживаться общих Windows Phone 8.0 и вызовы Windows SDK API, вы будете способны использовать один и тот же компонент среды выполнения (машинный или управляемый бит) в Windows Phone 8.0 Apache Cordova плагин. ~ Следите за этот пост.</li>
</ul>

<h1>Определение ваш плагин</h1>

<p>Теперь у нас есть плагин рабочих, нам необходимо пересмотреть определение плагин от ранее, так что мы можем опубликовать его. Теперь мы можем добавить компонент выполнения как основы. Обратите внимание, что тип выходных данных WindowsRuntimeComponent может быть .winmd или DLL</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;plugin</span> <span class="na">xmlns=</span><span class="s">"http://apache.org/cordova/ns/plugins/1.0"</span>
    <span class="na">id=</span><span class="s">"com.risingj.echoplugin"</span>
    <span class="na">version=</span><span class="s">"0.2.0"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;js-module</span> <span class="na">src=</span><span class="s">"www/echoplugin.js"</span> <span class="na">name=</span><span class="s">"echoplugin"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;clobbers</span> <span class="na">target=</span><span class="s">"window.echoplugin"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/js-module&gt;</span>

    <span class="c">&lt;!-- windows --&gt;</span>
    <span class="nt">&lt;platform</span> <span class="na">name=</span><span class="s">"windows"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;js-module</span> <span class="na">src=</span><span class="s">"src/windows/echopluginProxy.js"</span> <span class="na">name=</span><span class="s">"EchoProxy"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;merges</span> <span class="na">target=</span><span class="s">""</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/js-module&gt;</span>
        <span class="nt">&lt;framework</span> <span class="na">src=</span><span class="s">"src/windows/EchoRuntimeComponent.winmd"</span> <span class="na">custom=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/platform&gt;</span>

    <span class="c">&lt;!-- other platforms --&gt;</span>

<span class="nt">&lt;/plugin&gt;</span>
</code></pre></div>
<p>Вот это, теперь у вас есть распространяемый плагин, что вы можете поделиться со всем миром! Одна вещь к примечанию, лишь недавно была добавлена поддержка для добавления рамок в проект Windows Cordova, так что вам будет нужно убедиться, что ваше cordova инструментов текущем. Кордова cli и Кордова plugman поддерживает добавление, удаление собственных резервных плагины.</p>

<p>&gt; cordova plugin add com.risingj.echoplugin</p>

<p>или</p>

<p>&gt; plugman install --platform windows --plugin com.risingj.echoplugin --project .</p>

<p>https://github.com/purplecabbage/cordova-runtimecomp-echoplug</p>


            </div>
        </div>
        <div class="row">
            <div class="blue-divider"></div>
<footer>
    <div class="container-fluid">
        <div class="row">
    <div class="col-sm-9">
        <h1>More Resources</h1>
        <div class="row">
            <div class="col-sm-4">
                <h2>General</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="https://projects.apache.org/project.html?cordova">Apache Project Page</a>
                    </li>
                    <li>
                        <a href="http://www.apache.org/dyn/closer.cgi/cordova">Source Distribution</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">License</a>
                    </li>
                    <li>
                        <a href="https://cordova.apache.org/artwork">Artwork</a>
                    </li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Development</h2>
                <ul class="nav">
                    <li><a target="_blank" href="https://github.com/apache?utf8=%E2%9C%93&amp;q=cordova-">Source Code</a></li>
                    <li><a target="_blank" href="https://issues.apache.org/jira/browse/CB/">Issue Tracker</a></li>
                    <li><a target="_blank" href="http://stackoverflow.com/questions/tagged/cordova">Stack Overflow</a></li>
                    <li><a href="https://cordova.apache.org/contact">Mailing List</a></li>
                    <li><a href="https://cordova.apache.org/contribute/nightly_builds.html">Nightly builds</a></li>
                </ul>
            </div>
            <div class="col-sm-4">
                <h2>Apache Software Foundation</h2>
                <ul class="nav">
                    <li>
                        <a target="_blank" href="http://www.apache.org/">About ASF</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/foundation/sponsorship.html">Become a Sponsor</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/foundation/thanks.html">Thanks</a>
                    </li>
                    <li>
                        <a target="_blank" href="http://www.apache.org/security/">Security</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-sm-3">
        <h1>Contribute</h1>
        <p style="padding-top:20px"><strong>Help Cordova move forward!</strong></p>
        <p>Report bugs, improve the docs, or contribute to the code.</p>
        <a href="https://cordova.apache.org/contribute" class="btn btn-lg btn-primary">
            Learn More
        </a>
        <p style="padding-top:20px"> <a href="https://twitter.com/apachecordova" class="twitter-follow-button" data-show-count="false">Follow @apachecordova</a></p>
        <script async defer src="https://slack-cordova-io.herokuapp.com/slackin.js"></script>
    </div>
</div>
<p class="copyright_text">
    Copyright &copy; 2021 The Apache Software Foundation, Licensed under the <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.<br/>
    Apache and the Apache feather logos are <a target="_blank" href="http://www.apache.org/foundation/marks/list/">trademarks</a> of The Apache Software Foundation.
    <br/>
    "Raleway" font used under license. For details see the <a href="https://cordova.apache.org/attributions/">attributions page</a>.
</p>

    </div>
</footer>

        </div>
    </div>
</div>

<script defer type="text/javascript" src="../../../../../../static/js/lib/toc.min.js"></script>
<script defer type="text/javascript" src="../../../../../../static/js/docs.js"></script>

    <script defer type="text/javascript" src="../../../../../../static/js/index.js"></script>
    <script defer type="text/javascript" src="../../../../../../static/js/twitter.js"></script>
    



<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: '0a916ab198bd93d031aa70611271e42e',
        indexName: 'cordova',
        inputSelector: '#header-search-field',
        algoliaOptions: { 'facetFilters': ["version:  8.x", "language: ru"] }
    });
</script>

</body>
</html>
