<h1 id="ios-webviews">iOS WebViews</h1>

<p>Beginning with Cordova 1.4, you can use Cordova as a component in your
iOS applications. This component is code-named ‘Cleaver’.</p>

<p>New Cordova-based applications created using the Xcode template
provided in Cordova 1.4 or greater use Cleaver. (The template is
Cleaver’s reference implementation.)</p>

<p>Cordova 2.0.0 and subsequent versions only support the sub-project
based Cleaver implementation.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>
    <p>Cordova 2.3.0 or greater</p>
  </li>
  <li>
    <p>Xcode 4.5 or greater</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">config.xml</code> file (from a newly created iOS project)</p>
  </li>
</ul>

<h2 id="adding-cleaver-to-your-xcode-project-cordovalib-sub-project">Adding Cleaver to your Xcode project (CordovaLib sub-project)</h2>

<ol>
  <li>
    <p>Download and extract the Cordova source to a permanent directory location on your hard drive, for example to <code class="language-plaintext highlighter-rouge">~/Documents/Cordova</code>.</p>
  </li>
  <li>
    <p>Quit Xcode if it is running.</p>
  </li>
  <li>
    <p>Using Terminal.app, navigate to the directory where you put the downloaded source above.</p>
  </li>
  <li>
    <p>Copy the <code class="language-plaintext highlighter-rouge">config.xml</code> file into your project directory on disk (see the Prerequisites above).</p>
  </li>
  <li>
    <p>Drag and drop the <code class="language-plaintext highlighter-rouge">config.xml</code> file into the Project Navigator of Xcode.</p>
  </li>
  <li>
    <p>Choose the <strong>Create groups for any added folders</strong> radio button and press <strong>Finish</strong>.</p>
  </li>
  <li>
    <p>Drag and drop the <code class="language-plaintext highlighter-rouge">CordovaLib.xcodeproj</code> file into the Project Navigator of Xcode (from the permanent directory location above, and it should be in the <code class="language-plaintext highlighter-rouge">CordovaLib</code> subdirectory).</p>
  </li>
  <li>
    <p>Select <code class="language-plaintext highlighter-rouge">CordovaLib.xcodeproj</code> in the Project Navigator.</p>
  </li>
  <li>
    <p>Type the <strong>Option-Command-1</strong> key combination to <a href="../../../cordova/inappbrowser/inappbrowser.html">show</a> the <strong>File Inspector</strong>.</p>
  </li>
  <li>
    <p>Choose <strong>Relative to Group</strong> in the <strong>File Inspector</strong> for the drop-down menu for <strong>Location</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>project icon</strong> in the Project Navigator, select your <strong>Target</strong>, then select the <strong>Build Settings</strong> tab.</p>
  </li>
  <li>
    <p>Add <code class="language-plaintext highlighter-rouge">-all_load</code> and <code class="language-plaintext highlighter-rouge">-Obj-C</code> for the <strong>Other Linker Flags</strong> value.</p>
  </li>
  <li>
    <p>Click on the <strong>project icon</strong> in the Project Navigator, select your <strong>Target</strong>, then select the <strong>Build Phases</strong> tab.</p>
  </li>
  <li>
    <p>Expand <strong>Link Binaries with Libraries</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>+</strong> button, and add the following <strong>frameworks</strong>. Optionally in the Project Navigator, move them under the <strong>Frameworks</strong> group):</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AssetsLibrary.framework
CoreLocation.framework
CoreGraphics.framework
MobileCoreServices.framework
</code></pre></div>    </div>
  </li>
  <li>
    <p>Expand <strong>Target Dependencies</strong>, the top box labeled like this if you have multiple boxes!</p>
  </li>
  <li>
    <p>Select the <strong>+</strong> button, and add the <code class="language-plaintext highlighter-rouge">CordovaLib</code> build product.</p>
  </li>
  <li>
    <p>Expand <strong>Link Binaries with Libraries</strong>, the top box labeled like
this if you have multiple boxes!</p>
  </li>
  <li>
    <p>Select the <strong>+</strong> button, and add <code class="language-plaintext highlighter-rouge">libCordova.a</code>.</p>
  </li>
  <li>
    <p>Set the Xcode preference <strong>Xcode Preferences → Locations → Derived Data → Advanced…</strong> to <strong>Unique</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>project icon</strong> in the Project Navigator, select your <strong>Target</strong>, then select the <strong>Build Settings</strong> tab.</p>
  </li>
  <li>
    <p>Search for <strong>Header Search Paths</strong>. For that setting, add these three values below (with quotes):</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"$(TARGET_BUILD_DIR)/usr/local/lib/include"        
"$(OBJROOT)/UninstalledProducts/include"
"$(BUILT_PRODUCTS_DIR)"
</code></pre></div>    </div>

    <p>With Cordova 2.1.0, <code class="language-plaintext highlighter-rouge">CordovaLib</code> has been upgraded to use <strong>Automatic Reference Counting (ARC)</strong>. You don’t need to upgrade to <strong>ARC</strong> to use CordovaLib, but if you want to upgrade your project to use <strong>ARC</strong>, please use the Xcode migration wizard from the menu: <strong>Edit → Refactor → Convert to Objective-C ARC…</strong>, <strong>de-select libCordova.a</strong>, then run the wizard to completion.</p>
  </li>
</ol>

<h2 id="using-cdvviewcontroller-in-your-code">Using CDVViewController in your code</h2>

<ol>
  <li>
    <p>Add this header:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> #import &lt;Cordova/CDVViewController.h&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Instantiate a new <code class="language-plaintext highlighter-rouge">CDVViewController</code>, and retain it somewhere (e.g., to a property in your class):</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> CDVViewController* viewController = [CDVViewController new];
</code></pre></div>    </div>
  </li>
  <li>
    <p>(<em>OPTIONAL</em>) Set the <code class="language-plaintext highlighter-rouge">wwwFolderName</code> property (defaults to <code class="language-plaintext highlighter-rouge">www</code>):</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> viewController.wwwFolderName = @"myfolder";
</code></pre></div>    </div>
  </li>
  <li>
    <p>(<em>OPTIONAL</em>) Set the start page in your config.xml, the <code class="language-plaintext highlighter-rouge">&lt;content&gt;</code> tag.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;content src="index.html" /&gt;
</code></pre></div>    </div>

    <p>OR</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;content src="http://apache.org" /&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>(<em>OPTIONAL</em>) Set the <code class="language-plaintext highlighter-rouge">useSplashScreen</code> property (defaults to <code class="language-plaintext highlighter-rouge">NO</code>):</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> viewController.useSplashScreen = YES;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Set the <strong>view frame</strong> (always set this as the last property):</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> viewController.view.frame = CGRectMake(0, 0, 320, 480);
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add Cleaver to your view:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> [myView addSubview:viewController.view];
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="adding-your-html-css-and-javascript-assets">Adding your HTML, CSS and JavaScript assets</h2>

<ol>
  <li>
    <p>Create a new directory in your project on disk, <code class="language-plaintext highlighter-rouge">www</code> for example.</p>
  </li>
  <li>
    <p>Put your HTML, CSS and JavaScript assets into this directory.</p>
  </li>
  <li>
    <p>Drag and drop the directory into the Project Navigator of Xcode.</p>
  </li>
  <li>
    <p>Choose the <strong>Create folder references for any added folders</strong> radio button.</p>
  </li>
  <li>
    <p>Set the appropriate <code class="language-plaintext highlighter-rouge">wwwFolderName</code> and <code class="language-plaintext highlighter-rouge">startPage</code> properties for the folder you initially created, or use the defaults (see previous section) when you instantiate the <code class="language-plaintext highlighter-rouge">CDVViewController</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /*
  if you created a folder called 'myfolder' and
  you want the file 'mypage.html' in it to be
  the startPage
 */
 viewController.wwwFolderName = @"myfolder";
 viewController.startPage = @"mypage.html"
</code></pre></div>    </div>
  </li>
</ol>

