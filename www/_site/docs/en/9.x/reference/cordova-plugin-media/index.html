<!-- WARNING: This file is generated. See fetch_docs.js. -->

<!--
# license: Licensed to the Apache Software Foundation (ASF) under one
#         or more contributor license agreements.  See the NOTICE file
#         distributed with this work for additional information
#         regarding copyright ownership.  The ASF licenses this file
#         to you under the Apache License, Version 2.0 (the
#         "License"); you may not use this file except in compliance
#         with the License.  You may obtain a copy of the License at
#
#           http://www.apache.org/licenses/LICENSE-2.0
#
#         Unless required by applicable law or agreed to in writing,
#         software distributed under the License is distributed on an
#         "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
#         KIND, either express or implied.  See the License for the
#         specific language governing permissions and limitations
#         under the License.
-->

<table>
  <thead>
    <tr>
      <th style="text-align: center">AppVeyor</th>
      <th style="text-align: center">Travis CI</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><a href="https://ci.appveyor.com/project/ApacheSoftwareFoundation/cordova-plugin-media"><img src="https://ci.appveyor.com/api/projects/status/github/apache/cordova-plugin-media?branch=master" alt="Build status" /></a></td>
      <td style="text-align: center"><a href="https://travis-ci.org/apache/cordova-plugin-media"><img src="https://travis-ci.org/apache/cordova-plugin-media.svg?branch=master" alt="Build Status" /></a></td>
    </tr>
  </tbody>
</table>

<h1 id="cordova-plugin-media">cordova-plugin-media</h1>

<p>This plugin provides the ability to record and play back audio files on a device.</p>

<p><strong>NOTE</strong>: The current implementation does not adhere to a W3C
specification for media capture, and is provided for convenience only.
A future implementation will adhere to the latest W3C specification
and may deprecate the current APIs.</p>

<p>This plugin defines a global <code class="language-plaintext highlighter-rouge">Media</code> Constructor.</p>

<p>Although in the global scope, it is not available until after the <code class="language-plaintext highlighter-rouge">deviceready</code> event.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">deviceready</span><span class="dl">"</span><span class="p">,</span> <span class="nx">onDeviceReady</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="kd">function</span> <span class="nx">onDeviceReady</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Media</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="installation">Installation</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cordova plugin add cordova-plugin-media
</code></pre></div></div>

<h2 id="supported-platforms">Supported Platforms</h2>

<ul>
  <li>Android</li>
  <li>iOS</li>
  <li>Windows</li>
  <li>Browser</li>
</ul>

<h2 id="media">Media</h2>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">mediaSuccess</span><span class="p">,</span> <span class="p">[</span><span class="nx">mediaError</span><span class="p">],</span> <span class="p">[</span><span class="nx">mediaStatus</span><span class="p">]);</span>
</code></pre></div></div>

<h3 id="parameters">Parameters</h3>

<ul>
  <li>
    <p><strong>src</strong>: A URI containing the audio content. <em>(DOMString)</em></p>
  </li>
  <li>
    <p><strong>mediaSuccess</strong>: (Optional) The callback that executes after a <code class="language-plaintext highlighter-rouge">Media</code> object has completed the current play, record, or stop action. <em>(Function)</em></p>
  </li>
  <li>
    <p><strong>mediaError</strong>: (Optional) The callback that executes if an error occurs. It takes an integer error code. <em>(Function)</em></p>
  </li>
  <li>
    <p><strong>mediaStatus</strong>: (Optional) The callback that executes to indicate status changes. It takes a integer status code. <em>(Function)</em></p>
  </li>
</ul>

<p><strong>NOTE</strong>: <code class="language-plaintext highlighter-rouge">cdvfile</code> path is supported as <code class="language-plaintext highlighter-rouge">src</code> parameter:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="dl">'</span><span class="s1">cdvfile://localhost/temporary/recording.mp3</span><span class="dl">'</span><span class="p">,</span> <span class="p">...);</span>
</code></pre></div></div>

<h3 id="constants">Constants</h3>

<p>The following constants are reported as the only parameter to the
<code class="language-plaintext highlighter-rouge">mediaStatus</code> callback:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Media.MEDIA_NONE</code>     = 0;</li>
  <li><code class="language-plaintext highlighter-rouge">Media.MEDIA_STARTING</code> = 1;</li>
  <li><code class="language-plaintext highlighter-rouge">Media.MEDIA_RUNNING</code>  = 2;</li>
  <li><code class="language-plaintext highlighter-rouge">Media.MEDIA_PAUSED</code>   = 3;</li>
  <li><code class="language-plaintext highlighter-rouge">Media.MEDIA_STOPPED</code>  = 4;</li>
</ul>

<h3 id="methods">Methods</h3>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.getCurrentAmplitude</code>: Returns the current amplitude within an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.getCurrentPosition</code>: Returns the current position within an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.getDuration</code>: Returns the duration of an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.play</code>: Start or resume playing an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.pause</code>: Pause playback of an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.pauseRecord</code>: Pause recording of an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.release</code>: Releases the underlying operating system’s audio resources.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.resumeRecord</code>: Resume recording of an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.seekTo</code>: Moves the position within the audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.setVolume</code>: Set the volume for audio playback.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.startRecord</code>: Start recording an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.stopRecord</code>: Stop recording an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.stop</code>: Stop playing an audio file.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">media.setRate</code>: Set the playback rate for the audio file.</p>
  </li>
</ul>

<h3 id="additional-readonly-parameters">Additional ReadOnly Parameters</h3>

<ul>
  <li><strong>position</strong>: The position within the audio playback, in seconds.
    <ul>
      <li>Not automatically updated during play; call <code class="language-plaintext highlighter-rouge">getCurrentPosition</code> to update.</li>
    </ul>
  </li>
  <li><strong>duration</strong>: The duration of the media, in seconds.</li>
</ul>

<h2 id="mediagetcurrentamplitude">media.getCurrentAmplitude</h2>

<p>Returns the current amplitude within an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.getCurrentAmplitude(mediaSuccess, [mediaError]);
</code></pre></div></div>

<h3 id="supported-platforms-1">Supported Platforms</h3>

<ul>
  <li>Android</li>
  <li>iOS</li>
</ul>

<h3 id="parameters-1">Parameters</h3>

<ul>
  <li>
    <p><strong>mediaSuccess</strong>: The callback that is passed the current amplitude (0.0 - 1.0).</p>
  </li>
  <li>
    <p><strong>mediaError</strong>: (Optional) The callback to execute if an error occurs.</p>
  </li>
</ul>

<h3 id="quick-example">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Audio player</span>
<span class="c1">//</span>
<span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>

<span class="c1">// Record audio</span>
<span class="nx">my_media</span><span class="p">.</span><span class="nx">startRecord</span><span class="p">();</span>

<span class="nx">mediaTimer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// get media amplitude</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">getCurrentAmplitude</span><span class="p">(</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">amp</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">amp</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">%</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="c1">// error callback</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error getting amp=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="mediagetcurrentposition">media.getCurrentPosition</h2>

<p>Returns the current position within an audio file.  Also updates the <code class="language-plaintext highlighter-rouge">Media</code> object’s <code class="language-plaintext highlighter-rouge">position</code> parameter.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.getCurrentPosition(mediaSuccess, [mediaError]);
</code></pre></div></div>

<h3 id="parameters-2">Parameters</h3>

<ul>
  <li>
    <p><strong>mediaSuccess</strong>: The callback that is passed the current position in seconds.</p>
  </li>
  <li>
    <p><strong>mediaError</strong>: (Optional) The callback to execute if an error occurs.</p>
  </li>
</ul>

<h3 id="quick-example-1">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Audio player</span>
<span class="c1">//</span>
<span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>

<span class="c1">// Update media position every second</span>
<span class="kd">var</span> <span class="nx">mediaTimer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// get media position</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">getCurrentPosition</span><span class="p">(</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">position</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">position</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">position</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> sec</span><span class="dl">"</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="c1">// error callback</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error getting pos=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">e</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">);</span>
<span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="mediagetduration">media.getDuration</h2>

<p>Returns the duration of an audio file in seconds. If the duration is unknown, it returns a value of -1.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.getDuration();
</code></pre></div></div>

<h3 id="quick-example-2">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Audio player</span>
<span class="c1">//</span>
<span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>

<span class="c1">// Get duration</span>
<span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">timerDur</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">counter</span> <span class="o">=</span> <span class="nx">counter</span> <span class="o">+</span> <span class="mi">100</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">&gt;</span> <span class="mi">2000</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timerDur</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">dur</span> <span class="o">=</span> <span class="nx">my_media</span><span class="p">.</span><span class="nx">getDuration</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">dur</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timerDur</span><span class="p">);</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">audio_duration</span><span class="dl">'</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dur</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> sec</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="mediapause">media.pause</h2>

<p>Pauses playing an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.pause();
</code></pre></div></div>

<h3 id="quick-example-3">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Play audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">playAudio</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Play the audio file at url</span>
    <span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span> <span class="p">},</span>
        <span class="c1">// error callback</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Error: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">err</span><span class="p">);</span> <span class="p">}</span>
    <span class="p">);</span>

    <span class="c1">// Play audio</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>

    <span class="c1">// Pause after 10 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">my_media</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="mediapauserecord">media.pauseRecord</h2>

<p>Pauses recording an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.pauseRecord();
</code></pre></div></div>

<h3 id="supported-platforms-2">Supported Platforms</h3>

<ul>
  <li>iOS</li>
</ul>

<h3 id="quick-example-4">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Record audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">recordAudio</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">myrecording.mp3</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">mediaRec</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="c1">// error callback</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Error: </span><span class="dl">"</span><span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
        <span class="p">});</span>

    <span class="c1">// Record audio</span>
    <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">startRecord</span><span class="p">();</span>

    <span class="c1">// Pause Recording after 5 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">pauseRecord</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="mediaplay">media.play</h2>

<p>Starts or resumes playing an audio file.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="quick-example-5">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Play audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">playAudio</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Play the audio file at url</span>
    <span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="c1">// error callback</span>
        <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Error: </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">);</span>
    <span class="c1">// Play audio</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ios-quirks">iOS Quirks</h3>

<ul>
  <li>
    <p><strong>numberOfLoops</strong>: Pass this option to the <code class="language-plaintext highlighter-rouge">play</code> method to specify
the number of times you want the media file to play, e.g.:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  var myMedia = new Media("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3")
  myMedia.play({ numberOfLoops: 2 })
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong>playAudioWhenScreenIsLocked</strong>: Pass in this option to the <code class="language-plaintext highlighter-rouge">play</code>
method to specify whether you want to allow playback when the screen
is locked.  If set to <code class="language-plaintext highlighter-rouge">true</code> (the default value), the state of the
hardware mute button is ignored, e.g.:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  var myMedia = new Media("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3");
  myMedia.play({ playAudioWhenScreenIsLocked : true });
  myMedia.setVolume('1.0');
</code></pre></div>    </div>
  </li>
</ul>

<blockquote>
  <p>Note: To allow playback with the screen locked or background audio you have to add <code class="language-plaintext highlighter-rouge">audio</code> to <code class="language-plaintext highlighter-rouge">UIBackgroundModes</code> in the <code class="language-plaintext highlighter-rouge">info.plist</code> file. See <a href="https://developer.apple.com/library/content/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html#//apple_ref/doc/uid/TP40007072-CH4-SW23">Apple documentation</a>. Also note that the audio has to be started before going to background.</p>
</blockquote>

<ul>
  <li>
    <p><strong>order of file search</strong>: When only a file name or simple path is
provided, iOS searches in the <code class="language-plaintext highlighter-rouge">www</code> directory for the file, then in
the application’s <code class="language-plaintext highlighter-rouge">documents/tmp</code> directory:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  var myMedia = new Media("audio/beer.mp3")
  myMedia.play()  // first looks for file in www/audio/beer.mp3 then in &lt;application&gt;/documents/tmp/audio/beer.mp3
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="mediarelease">media.release</h2>

<p>Releases the underlying operating system’s audio resources.
This is particularly important for Android, since there are a finite amount of
OpenCore instances for media playback. Applications should call the <code class="language-plaintext highlighter-rouge">release</code>
function for any <code class="language-plaintext highlighter-rouge">Media</code> resource that is no longer needed.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.release();
</code></pre></div></div>

<h3 id="quick-example-6">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Audio player</span>
<span class="c1">//</span>
<span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>

<span class="nx">my_media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
<span class="nx">my_media</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
<span class="nx">my_media</span><span class="p">.</span><span class="nx">release</span><span class="p">();</span>
</code></pre></div></div>

<h2 id="mediaresumerecord">media.resumeRecord</h2>

<p>Resume recording an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.resumeRecord();
</code></pre></div></div>

<h3 id="supported-platforms-3">Supported Platforms</h3>

<ul>
  <li>iOS</li>
</ul>

<h3 id="quick-example-7">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Record audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">recordAudio</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">myrecording.mp3</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">mediaRec</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="c1">// error callback</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Error: </span><span class="dl">"</span><span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
        <span class="p">});</span>

    <span class="c1">// Record audio</span>
    <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">startRecord</span><span class="p">();</span>

    <span class="c1">// Pause Recording after 5 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">pauseRecord</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>

    <span class="c1">// Resume Recording after 10 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">resumeRecord</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="mediaseekto">media.seekTo</h2>

<p>Sets the current position within an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.seekTo(milliseconds);
</code></pre></div></div>

<h3 id="parameters-3">Parameters</h3>

<ul>
  <li><strong>milliseconds</strong>: The position to set the playback position within the audio, in milliseconds.</li>
</ul>

<h3 id="quick-example-8">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Audio player</span>
<span class="c1">//</span>
<span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
<span class="c1">// SeekTo to 10 seconds after 5 seconds</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">seekTo</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="mediasetvolume">media.setVolume</h2>

<p>Set the volume for an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.setVolume(volume);
</code></pre></div></div>

<h3 id="parameters-4">Parameters</h3>

<ul>
  <li><strong>volume</strong>: The volume to set for playback.  The value must be within the range of 0.0 to 1.0.</li>
</ul>

<h3 id="supported-platforms-4">Supported Platforms</h3>

<ul>
  <li>Android</li>
  <li>iOS</li>
</ul>

<h3 id="quick-example-9">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Play audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">playAudio</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Play the audio file at url</span>
    <span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="c1">// error callback</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Error: </span><span class="dl">"</span><span class="o">+</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="c1">// Play audio</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>

    <span class="c1">// Mute volume after 2 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">my_media</span><span class="p">.</span><span class="nx">setVolume</span><span class="p">(</span><span class="dl">'</span><span class="s1">0.0</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">2000</span><span class="p">);</span>

    <span class="c1">// Set volume to 1.0 after 5 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">my_media</span><span class="p">.</span><span class="nx">setVolume</span><span class="p">(</span><span class="dl">'</span><span class="s1">1.0</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="mediastartrecord">media.startRecord</h2>

<p>Starts recording an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.startRecord();
</code></pre></div></div>

<h3 id="supported-platforms-5">Supported Platforms</h3>

<ul>
  <li>Android</li>
  <li>iOS</li>
  <li>Windows</li>
</ul>

<h3 id="quick-example-10">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Record audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">recordAudio</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">myrecording.mp3</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">mediaRec</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="c1">// error callback</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Error: </span><span class="dl">"</span><span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
        <span class="p">});</span>

    <span class="c1">// Record audio</span>
    <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">startRecord</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="android-quirks">Android Quirks</h3>

<ul>
  <li>Android devices record audio in AAC ADTS file format. The specified file should end with a <em>.aac</em> extension.</li>
  <li>The hardware volume controls are wired up to the media volume while any Media objects are alive. Once the last created Media object has <code class="language-plaintext highlighter-rouge">release()</code> called on it, the volume controls revert to their default behaviour. The controls are also reset on page navigation, as this releases all Media objects.</li>
</ul>

<h3 id="ios-quirks-1">iOS Quirks</h3>

<ul>
  <li>
    <p>iOS only records to files of type <em>.wav</em> and <em>.m4a</em> and returns an error if the file name extension is not correct.</p>
  </li>
  <li>
    <p>If a full path is not provided, the recording is placed in the application’s <code class="language-plaintext highlighter-rouge">documents/tmp</code> directory. This can be accessed via the <code class="language-plaintext highlighter-rouge">File</code> API using <code class="language-plaintext highlighter-rouge">LocalFileSystem.TEMPORARY</code>. Any subdirectory specified at record time must already exist.</p>
  </li>
  <li>
    <p>Files can be recorded and played back using the documents URI:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  var myMedia = new Media("documents://beer.mp3")
</code></pre></div>    </div>
  </li>
  <li>
    <p>Since iOS 10 it’s mandatory to provide an usage description in the <code class="language-plaintext highlighter-rouge">info.plist</code> if trying to access privacy-sensitive data. When the system prompts the user to allow access, this usage description string will displayed as part of the permission dialog box, but if you didn’t provide the usage description, the app will crash before showing the dialog. Also, Apple will reject apps that access private data but don’t provide an usage description.</p>
  </li>
</ul>

<p>This plugins requires the following usage description:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">NSMicrophoneUsageDescription</code> describes the reason that the app accesses the user’s microphone.</li>
</ul>

<p>To add this entry into the <code class="language-plaintext highlighter-rouge">info.plist</code>, you can use the <code class="language-plaintext highlighter-rouge">edit-config</code> tag in the <code class="language-plaintext highlighter-rouge">config.xml</code> like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;edit-config target="NSMicrophoneUsageDescription" file="*-Info.plist" mode="merge"&gt;
    &lt;string&gt;need microphone access to record sounds&lt;/string&gt;
&lt;/edit-config&gt;
</code></pre></div></div>

<h3 id="windows-quirks">Windows Quirks</h3>

<ul>
  <li>
    <p>Windows devices can use MP3, M4A and WMA formats for recorded audio. However in most cases it is not possible to use MP3 for audio recording on <em>Windows Phone 8.1</em> devices, because an MP3 encoder is <a href="https://msdn.microsoft.com/en-us/library/windows/apps/windows.media.mediaproperties.mediaencodingprofile.createmp3.aspx">not shipped with Windows Phone</a>.</p>
  </li>
  <li>
    <p>If a full path is not provided, the recording is placed in the <code class="language-plaintext highlighter-rouge">AppData/temp</code> directory. This can be accessed via the <code class="language-plaintext highlighter-rouge">File</code> API using <code class="language-plaintext highlighter-rouge">LocalFileSystem.TEMPORARY</code> or <code class="language-plaintext highlighter-rouge">ms-appdata:///temp/&lt;filename&gt;</code> URI.</p>
  </li>
  <li>
    <p>Any subdirectory specified at record time must already exist.</p>
  </li>
</ul>

<h2 id="mediastop">media.stop</h2>

<p>Stops playing an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.stop();
</code></pre></div></div>

<h3 id="quick-example-11">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Play audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">playAudio</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Play the audio file at url</span>
    <span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="c1">// error callback</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">playAudio():Audio Error: </span><span class="dl">"</span><span class="o">+</span><span class="nx">err</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">);</span>

    <span class="c1">// Play audio</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>

    <span class="c1">// Pause after 10 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">my_media</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="mediastoprecord">media.stopRecord</h2>

<p>Stops recording an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.stopRecord();
</code></pre></div></div>

<h3 id="supported-platforms-6">Supported Platforms</h3>

<ul>
  <li>Android</li>
  <li>iOS</li>
  <li>Windows</li>
</ul>

<h3 id="quick-example-12">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Record audio</span>
<span class="c1">//</span>
<span class="kd">function</span> <span class="nx">recordAudio</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">myrecording.mp3</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">mediaRec</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span>
        <span class="c1">// success callback</span>
        <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Success</span><span class="dl">"</span><span class="p">);</span>
        <span class="p">},</span>

        <span class="c1">// error callback</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">recordAudio():Audio Error: </span><span class="dl">"</span><span class="o">+</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">);</span>

    <span class="c1">// Record audio</span>
    <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">startRecord</span><span class="p">();</span>

    <span class="c1">// Stop recording after 10 seconds</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">mediaRec</span><span class="p">.</span><span class="nx">stopRecord</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="mediasetrate">media.setRate</h2>

<p>Stops recording an audio file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>media.setRate(rate);
</code></pre></div></div>

<h3 id="supported-platforms-7">Supported Platforms</h3>

<ul>
  <li>iOS</li>
</ul>

<h3 id="parameters-5">Parameters</h3>

<ul>
  <li><strong>rate</strong>: The rate to set for playback.</li>
</ul>

<h3 id="quick-example-13">Quick Example</h3>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Audio player</span>
<span class="c1">//</span>
<span class="kd">var</span> <span class="nx">my_media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nx">src</span><span class="p">,</span> <span class="nx">onSuccess</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>

<span class="c1">// Set playback rate to 2.0x after 10 seconds</span>
<span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">my_media</span><span class="p">.</span><span class="nx">setRate</span><span class="p">(</span><span class="mf">2.0</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">5000</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="mediaerror">MediaError</h2>

<p>A <code class="language-plaintext highlighter-rouge">MediaError</code> object is returned to the <code class="language-plaintext highlighter-rouge">mediaError</code> callback
function when an error occurs.</p>

<h3 id="properties">Properties</h3>

<ul>
  <li>
    <p><strong>code</strong>: One of the predefined error codes listed below.</p>
  </li>
  <li>
    <p><strong>message</strong>: An error message describing the details of the error.</p>
  </li>
</ul>

<h3 id="constants-1">Constants</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">MediaError.MEDIA_ERR_ABORTED</code>        = 1</li>
  <li><code class="language-plaintext highlighter-rouge">MediaError.MEDIA_ERR_NETWORK</code>        = 2</li>
  <li><code class="language-plaintext highlighter-rouge">MediaError.MEDIA_ERR_DECODE</code>         = 3</li>
  <li><code class="language-plaintext highlighter-rouge">MediaError.MEDIA_ERR_NONE_SUPPORTED</code> = 4</li>
</ul>
