<h1 id="next-steps">Next Steps</h1>

<p>For developers who have an understanding of how to use the Cordova CLI and make use of plugins, there are a few things you may want to consider researching next to build better, more performant Cordova applications. The following document offers advice on various topics relating to best practices, testing, upgrades, and other topics, but is not meant to be prescriptive. Consider this your launching point for your growth as a Cordova developer. Also, if you see something that can be improved, please <a href="https://cordova.apache.org/contribute/">contribute</a>!</p>

<h1 id="best-practices-for-cordova-apps">Best Practices for Cordova Apps</h1>

<h2 id="1-spa-is-your-friend">1) SPA Is Your Friend</h2>

<p>First and foremost - your Cordova applications should adopt the SPA (Single Page Application) design. Loosely defined, a SPA is a client-side application that is run from one request of a web page. The user loads an initial set of resources (HTML, CSS, and JavaScript) and further updates (showing a new view, loading data) is done via XHR requests. SPAs are commonly used for more complex client-side applications. Gmail is a great example of this. After you load Gmail, mail views, editing, and organization are all done by updating the DOM instead of actually leaving the current page to load a completely new one.</p>

<p>Using a SPA can help you organize your application in a more efficient manner, but it also has specific benefits for Cordova applications. A Cordova application must wait for the <a href="../../cordova/events/events.html#deviceready">deviceready event</a> to fire before any plugins may be used. If you do not use a SPA, and your user clicks to go from one page to another, you will have to wait for <a href="../../cordova/events/events.html#deviceready">deviceready</a> to fire again before you make use of a plugin. This is easy to forget as your application gets larger.</p>

<p>Even if you choose not to use Cordova, creating a mobile application without using a single page architecture will have serious performance implications. This is because navigating between pages will require scripts, assets, etc., to be reloaded. Even if these assets are cached, there will still be performance issues.</p>

<p>Examples of SPA libraries you can use in your Cordova applications are:</p>

<ul>
  <li><a href="https://reactjs.org">ReactJS</a></li>
  <li><a href="https://vuejs.org/">Vue</a></li>
  <li><a href="https://angular.io/">Angular</a></li>
  <li><a href="https://emberjs.com">EmberJS</a></li>
  <li><a href="https://backbonejs.org">Backbone</a></li>
  <li><a href="https://www.telerik.com/kendo-ui">Kendo UI</a></li>
  <li><a href="https://onsen.io">Onsen UI</a></li>
  <li><a href="https://www.sencha.com/products/extjs/">Sencha Ext JS</a></li>
</ul>

<p>And many, many, more.</p>

<h2 id="2-performance-considerations">2) Performance Considerations</h2>

<p>Consider the following issues to improve the performance in your mobile applications:</p>

<p><strong>Click versus Touch</strong> - Many devices impose a 300ms delay on click events in order to distinguish between a tap and tap-to-zoom gesture. This can have the effect of making your app feel slow and unresponsive. Avoiding this delay is one of the most important ways of improving your app’s perceived performance. For more information on the tap delay, see <a href="https://developers.google.com/web/updates/2013/12/300ms-tap-delay-gone-away">300ms tap delay, gone away</a> on the Google Developer site.</p>

<p>Most Android versions no longer impose this delay, but iOS by default still does. For iOS, using <a href="https://github.com/apache/cordova-plugin-wkwebview-engine">WkWebView</a> instead of the default UIWebView gets rid of this delay. For both Android and iOS, you must ensure that your viewport meta tag has at least <code class="language-plaintext highlighter-rouge">width=device-width</code>, or you will still have the tap delay. If you need to support older devices (Android 4.4 or iOS 8), consider a polyfill such as <a href="https://github.com/ftlabs/fastclick">FastClick</a>, or using <code class="language-plaintext highlighter-rouge">touchstart</code> and <code class="language-plaintext highlighter-rouge">touchend</code> instead of <code class="language-plaintext highlighter-rouge">click</code>.</p>

<p><strong>CSS Transitions versus DOM Manipulation</strong> - Using hardware accelerated CSS transitions will be dramatically better than using JavaScript to create animations. See the list of resources at the end of this section for examples.</p>

<p><strong>Networks Suck</strong> - Ok, networks don’t always suck, but the latency of mobile networks, even good mobile networks, is far worse than you probably think. A desktop app that slurps down 500 rows of JSON data, every 30 seconds, will be both slower on a mobile device as well as a battery hog. Keep in mind that Cordova apps have multiple ways to persist data in the app (LocalStorage and the file system for example). Cache that data locally and be aware of the amount of data you are sending back and forth. This is an especially important consideration when your application is connected over a cellular network.</p>

<p><strong>Additional Performance Articles and Resources</strong></p>

<ul>
  <li><a href="https://channel9.msdn.com/Events/Build/2013/4-313">“Fast Apps and Sites with JavaScript”</a></li>
</ul>

<h2 id="3-recognize-and-handle-offline-status">3) Recognize and Handle Offline Status</h2>

<p>See the previous tip about networks. Not only can you be on a slow network, it is entirely possible for your application to be completely offline. Your application should handle this in an intelligent manner. If your application does not, people will think your application is broken. Given how easy it is to handle (Cordova supports listening for both an offline and online event), there is absolutely no reason for your application to not respond well when run offline. Be sure to test (see the Testing section below) your application and be sure to test how your application handles when you start in one state and then switch to another.</p>

<p>Note that the online and offline events, as well as the Network Connection API, is not perfect. You may need to rely on using an XHR request to see if the device is truly offline or online. At the end of the day, be sure add some form of support for network issues - in fact, the Apple store (and probably other stores) will reject apps that don’t properly handle offline/online states. For more discussion on this topic, see
<a href="https://www.telerik.com/blogs/is-this-thing-on-%28part-1%29">“Is This Thing On?”</a></p>

<h1 id="handling-upgrades">Handling Upgrades</h1>

<h2 id="upgrading-cordova-projects">Upgrading Cordova Projects</h2>

<p>There is no upgrade command for Cordova projects. Instead, remove the platform from your project, and re-add it to get the latest version:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cordova platform rm android
cordova platform add android
</code></pre></div></div>

<p>It is absolutely critical that you read up on what was changed in the updated version, as the update may break your code. The best place to find this information will be in the release notes published both in the repositories and on the Cordova blog. You will want to test your app thoroughly in order to verify that it is working correctly after you perform the update.</p>

<p>Note: some plugins may not be compatible with the new version of Cordova. If a plugin is not compatible, you may be able to find a replacement plugin that does what you need, or you may need to delay upgrading your project. Alternatively, alter the plugin so that it does work under the new version and contribute back to the community.</p>

<h2 id="plugin-upgrades">Plugin Upgrades</h2>
<p>Upgrading plugins involves the same process as platforms - remove it, then re-add it.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cordova plugin rm some-plugin
cordova plugin add some-plugin
</code></pre></div></div>
<p>Refer to <a href="../../platform_plugin_versioning_ref/index.html">Manage versions and platforms</a> for more details.</p>

<p>Be sure to check the updated plugin’s documentation, as you may need to adjust your code to work with the new version. Also, double check that the new version of the plugin works with your project’s version of Cordova.</p>

<p>Always test your apps to ensure that installing the new plugin has not broken something that you did not anticipate.</p>

<p>If your project has a lot of plugins that you need updated, it might save time to create a shell or batch script that removes and adds the plugins with one command.</p>

<h1 id="testing-cordova-apps">Testing Cordova apps</h1>

<p>Testing your applications is super important. The Cordova team uses <a href="https://jasmine.github.io/">Jasmine</a>, but any web-friendly unit testing solution will do.</p>

<h2 id="testing-on-a-simulator-vs-on-a-real-device">Testing on a simulator vs. on a real device</h2>

<p>It’s not uncommon to use desktop browsers and device simulators/emulators when developing a Cordova application. However, it is incredibly important that you test your app on as many physical devices as you possibly can:</p>

<ul>
  <li>Simulators are just that: simulators. For example, your app may work in the iOS simulator without a problem, but it may fail on a real device (especially in certain circumstances, such as a low memory state). Or, your app may actually fail on the simulator while it works just fine on a real device.</li>
  <li>Emulators are just that: emulators. They do not represent how well your app will run on a physical device. For example, some emulators may render your app with a garbled display, while a real device has no problem. (If you do encounter this problem, disable the host GPU in the emulator.)</li>
  <li>Simulators are generally faster than your physical device. Emulators, on the other hand, are generally slower. Do not judge the performance of your app by how it performs in a simulator or an emulator. Do judge the performance of your app by how it runs on a spectrum of real devices.</li>
  <li>It’s impossible to get a good feel for how your app responds to your touch by using a simulator or an emulator. Instead, running the app on a real device can point out problems with the sizes of user interface elements, responsiveness, etc.</li>
  <li>Although it would be nice to be able to test only on one device per platform, it is best to test on many devices sporting many different OS versions. For example, what works on your particular Android smartphone may fail on another Android device. What works on the latest iOS device may fail on an older one.</li>
</ul>

<p>It is, of course, impossible to test on every possible device on the market. For this reason, it’s wise to recruit many testers who have different devices. Although they won’t catch every problem, chances are good that they will discover quirks and issues that you would never find alone.</p>

<h1 id="debugging-cordova-apps">Debugging Cordova apps</h1>

<p>In most cases, debugging Cordova apps is quite straightforward.</p>

<h2 id="ios-debugging">iOS Debugging</h2>

<h3 id="xcode">Xcode</h3>
<p>With Xcode you can debug the iOS native side of your Cordova application. Make sure the Debug Area is showing (View -&gt; Debug Area). Once your app is running on the device (or simulator), you can view log output in the debug area. This is where any errors or warnings will print. You can also set breakpoints within the source files. This will allow you to step through the code one line at a time and view the state of the variables at that time. The state of the variables is shown in the debug area when a breakpoint is hit. Once your app is up and running on the device, you can bring up Safari’s web inspector (as described below) to debug the webview and JS side of your application. For more details refer to the <a href="https://developer.apple.com/support/debugging/">Apple Debugging Support</a> docs.</p>

<h3 id="safari-remote-debugging-with-web-inspector">Safari Remote Debugging with Web Inspector</h3>
<p>With Safari’s web inspector you can debug the webview and js code in your Cordova application. This works only on macOS. It uses Safari to connect to your device (or the simulator) and will connect the browser’s dev tools to the Cordova application. You get what you expect from dev tools - DOM inspection/manipulation, a JavaScript debugger, network inspection, the console, and more. Like Xcode, with Safari’s web inspector you can set breakpoints in the JavaScript code and view the state of the variables at that time. You can view any errors, warnings or messages that are printed to the console. You can also run JavaScript commands directly from the console as your app is running.</p>

<p>To start inspecting, first enable it on device at <code class="language-plaintext highlighter-rouge">Settings &gt; Safari &gt; Advanced &gt; Web Inspector</code>. On your desktop, enable the developer tools from <code class="language-plaintext highlighter-rouge">Safari &gt; Preferences &gt; Advanced &gt; Show Develop menu in menu bar</code>. In the <code class="language-plaintext highlighter-rouge">Develop</code> menu, you will now be able to select the connected device, and the app you want to inspect.</p>

<h2 id="chrome-remote-debugging">Chrome Remote Debugging</h2>
<p>Virtually the same as the Safari version, this works with Android only but can be used from any desktop operating system. Once connected, you get the same Chrome Dev Tools experience for your mobile applications as you do with your desktop applications. Even better, the Chrome Dev Tools have a mirror option that shows your app running on the mobile device. This is more than just a view - you can scroll and click from dev tools and it updates on the mobile device.</p>

<p>To inspect, simply open up the URL <code class="language-plaintext highlighter-rouge">chrome://inspect</code> in Chrome on your desktop. Here you will see a list of connected devices and inspectable apps. Your device must be set up for USB debugging for this to work. Full instructions on getting set up can be found at <a href="https://developers.google.com/chrome/mobile/docs/debugging">https://developers.google.com/chrome/mobile/docs/debugging</a>.</p>

<p>If you can see your device in the inspect devices section, but you can’t see the Cordova webview you may need to add <code class="language-plaintext highlighter-rouge">android:debuggable="true"</code> in the <code class="language-plaintext highlighter-rouge">&lt;application&gt;</code> node of your <code class="language-plaintext highlighter-rouge">AndroidManifest.xml</code>.</p>

<p>It is also possible to use Chrome Dev Tools to inspect iOS apps, through a WebKit proxy: <a href="https://github.com/google/ios-webkit-debug-proxy/">https://github.com/google/ios-webkit-debug-proxy/</a></p>

<h1 id="user-interface">User Interface</h1>

<p>Building a Cordova application that looks nice on mobile can be a challenge, especially for developers. Many people chose to use a UI framework to make this easier. Here is a short list of options you may want to consider.</p>

<ul>
  <li><a href="https://ionicframework.com/">Ionic</a> - This powerful UI framework actually has its own CLI to handle project creation.</li>
  <li><a href="http://goratchet.com/">Ratchet</a> - Brought to you by the people who created Bootstrap.</li>
  <li><a href="https://www.telerik.com/kendo-ui">Kendo UI</a> - Open source UI and application framework from Telerik.</li>
  <li><a href="https://onsen.io">Onsen UI</a> - Open source UI framework for both websites and Cordova apps</li>
  <li><a href="http://topcoat.io">Topcoat</a></li>
  <li><a href="https://reactjs.org/">ReactJS</a></li>
</ul>

<p>When building your user interface, it is important to think about all platforms that you are targeting and the differences between the user’s expectations. For example, an Android application that has an iOS-style UI will probably not go over well with users. This sometimes is even enforced by the various application stores. Because of this, it is important that you respect the conventions of each platform and therefore are familiar with the various Human Interface Guidelines:</p>

<ul>
  <li><a href="https://developer.apple.com/design/human-interface-guidelines/ios/overview/themes/">iOS</a></li>
  <li><a href="https://developer.android.com/design/">Android</a></li>
  <li><a href="https://developer.microsoft.com/en-us/windows/apps/design">Windows Phone</a></li>
</ul>

<h1 id="special-considerations">Special Considerations</h1>

<p>Although Cordova makes cross-platform development easier, it’s just not possible to provide 100% isolation from the underlying native platform, so do be aware of restrictions.</p>

<h2 id="platform-quirks">Platform Quirks</h2>

<p>While reading the documentation, look for sections which outline different behaviors or requirements on multiple platforms. If present, these would be in a section titled “Android Quirks”, “iOS Quirks”, etc. Read through these quirks and be aware of them as you work with Cordova.</p>

<h2 id="loading-remote-content">Loading Remote Content</h2>

<p>Invoking Cordova JavaScript functions from a remotely-loaded HTML page (an HTML page not stored locally on the device) is an unsupported configuration. This is because Cordova was not designed for this, and the Apache Cordova community does no testing of this configuration. While it can work in some circumstances, it is not recommended nor supported. There are challenges with the same origin policy, keeping the JavaScript and native portions of Cordova synchronized at the same version (since they are coupled via private APIs which may change), the trustworthiness of remote content calling native local functions, and potential app store rejection.</p>

<p>The display of remotely-loaded HTML content in a webview should be done using Cordova’s InAppBrowser. The InAppBrowser is designed so that JavaScript running there does not have access to the Cordova JavaScript APIs for the reasons listed above. Please refer to the <a href="../appdev/security/index.html">Security Guide</a>.</p>

<h1 id="keeping-up">Keeping Up</h1>

<p>Here are a few ways to keep up to date with Cordova.</p>

<ul>
  <li>Subscribe to the <a href="https://cordova.apache.org/blog/">Cordova blog</a>.</li>
  <li>Subscribe to the <a href="https://cordova.apache.org/contact/">developer list</a>. Note - this is not a support group, but a place where development of Cordova is discussed.</li>
</ul>

<h1 id="getting-help">Getting Help</h1>

<p>The following links are the best places to get help for Cordova:</p>

<ul>
  <li>Slack: <a href="http://slack.cordova.io/">http://slack.cordova.io/</a> The official Cordova Slack channel is a great way to get help from the community, and the place you are most likely to get answers to your questions</li>
  <li>StackOverflow: <a href="https://stackoverflow.com/questions/tagged/cordova">https://stackoverflow.com/questions/tagged/cordova</a>
By using the Cordova tag, you can view and browse all Cordova questions. Note that StackOverflow automatically converts the “Phonegap” tag to “Cordova”, so this way you will be able to access historical questions as well</li>
  <li>PhoneGap Google Group: <a href="https://groups.google.com/forum/#!forum/phonegap">https://groups.google.com/forum/#!forum/phonegap</a>
This Google Group was the old support forum when Cordova was still called PhoneGap. While there are still a lot of Cordova users that frequently visit this group, the Cordova community has expressed an interest in focusing less on this group and instead using StackOverflow for support</li>
  <li>Meetup: <a href="https://phonegap.meetup.com">http://phonegap.meetup.com</a> -
Consider finding a local Cordova/PhoneGap meetup group</li>
</ul>

