<h1 id="filetransfer">FileTransfer</h1>

<p>FileTransfer is an object that allows you to upload files to a server or download files from a server.</p>

<h2 id="properties">Properties</h2>

<p>N/A</p>

<h2 id="methods">Methods</h2>

<ul>
  <li><strong>upload</strong>: sends a file to a server.</li>
  <li><strong>download</strong>: downloads a file from server.</li>
</ul>

<h2 id="details">Details</h2>

<p>The <code class="language-plaintext highlighter-rouge">FileTransfer</code> object provides a way to upload files to a remote server using an HTTP multi-part POST request.  Both HTTP and HTTPS protocols are supported.  Optional parameters can be specified by passing a <a href="../fileuploadoptions/fileuploadoptions.html">FileUploadOptions</a> object to the upload method.  On successful upload, the success callback will be called with a <a href="../fileuploadresult/fileuploadresult.html">FileUploadResult</a> object.  If an error occurs, the error callback will be invoked with a <a href="../filetransfererror/filetransfererror.html">FileTransferError</a> object.
It is also possible to download a file from remote and save it on the device (only iOS and Android).</p>

<h2 id="supported-platforms">Supported Platforms</h2>

<ul>
  <li>Android</li>
  <li>BlackBerry WebWorks (OS 5.0 and higher)</li>
  <li>iOS</li>
  <li>Windows Phone 7 ( Mango )</li>
</ul>

<h2 id="upload">upload</h2>

<p><strong>Parameters:</strong></p>

<ul>
  <li><strong>filePath</strong> - Full path of the file on the device</li>
  <li><strong>server</strong> - URL of the server to receive the file</li>
  <li><strong>successCallback</strong> - A callback that is called with a <a href="../metadata/metadata.html">Metadata</a> object. <em>(Function)</em></li>
  <li><strong>errorCallback</strong> - A callback that is called if an error occurs retrieving the <a href="../metadata/metadata.html">Metadata</a>. Invoked with a <a href="../filetransfererror/filetransfererror.html">FileTransferError</a> object. <em>(Function)</em></li>
  <li><strong>options</strong> - Optional parameters such as file name and mimetype</li>
</ul>

<p><strong>Quick Example</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// !! Assumes variable fileURI contains a valid URI to a  text file on the device
</code></pre></div></div>

  	var win = function(r) {
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    console.log("Code = " + r.responseCode);
    console.log("Response = " + r.response);
    console.log("Sent = " + r.bytesSent);
}

var fail = function(error) {
    alert("An error has occurred: Code = " + error.code);
    console.log("upload error source " + error.source);
    console.log("upload error target " + error.target);
}

var options = new [FileUploadOptions](../fileuploadoptions/fileuploadoptions.html)();
options.fileKey="file";
options.fileName=fileURI.substr(fileURI.lastIndexOf('/')+1);
options.mimeType="text/plain";

var params = new Object();
params.value1 = "test";
params.value2 = "param";
	
options.params = params;

var ft = new FileTransfer();
ft.upload(fileURI, "http://some.server.com/upload.php", win, fail, options);
</code></pre></div></div>

<p><strong>Full Example</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;File Transfer Example&lt;/title&gt;

    &lt;script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" charset="utf-8"&gt;
        
        // Wait for Cordova to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);
        
        // Cordova is ready
        //
        function onDeviceReady() {
            
            // Retrieve image file location from specified source
            navigator.camera.getPicture(uploadPhoto,
                                        function(message) { alert('get picture failed'); },
                                        { quality: 50, 
                                        destinationType: navigator.camera.DestinationType.FILE_URI,
                                        sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY }
                                        );
            
        }
        
        function uploadPhoto(imageURI) {
            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";
            
            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";
            
            options.params = params;
            
            var ft = new FileTransfer();
            ft.upload(imageURI, "http://some.server.com/upload.php", win, fail, options);
        }
        
        function win(r) {
            console.log("Code = " + r.responseCode);
            console.log("Response = " + r.response);
            console.log("Sent = " + r.bytesSent);
        }
        
        function fail(error) {
            alert("An error has occurred: Code = " + error.code);
            console.log("upload error source " + error.source);
            console.log("upload error target " + error.target);
        }
        
        &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Example&lt;/h1&gt;
    &lt;p&gt;Upload File&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div>

<h2 id="download">download</h2>

<p><strong>Parameters:</strong></p>

<ul>
  <li><strong>source</strong> - URL of the server to receive the file</li>
  <li><strong>target</strong> - Full path of the file on the device</li>
  <li><strong>successCallback</strong> - A callback that is called with a <a href="../fileentry/fileentry.html">FileEntry</a> object. <em>(Function)</em></li>
  <li><strong>errorCallback</strong> - A callback that is called if an error occurs retrieving the <a href="../metadata/metadata.html">Metadata</a>. Invoked with a <a href="../filetransfererror/filetransfererror.html">FileTransferError</a> object. <em>(Function)</em></li>
</ul>

<p><strong>Quick Example</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> // !! Assumes variable url contains a valid URI to a file on a server and filePath is a valid path on the device

var fileTransfer = new FileTransfer();

fileTransfer.download(
    url,
    filePath,
    function(entry) {
        console.log("download complete: " + entry.fullPath);
    },
    function(error) {
        console.log("download error source " + error.source);
        console.log("download error target " + error.target);
        console.log("upload error code" + error.code);
    }
);
</code></pre></div></div>
