<h1 id="filereader">FileReader</h1>

<p>The <code class="language-plaintext highlighter-rouge">FileReader</code> allows basic access to a file.</p>

<h2 id="properties">Properties</h2>

<ul>
  <li>
    <p><strong>readyState</strong>: One of the reader’s three possible states, either <code class="language-plaintext highlighter-rouge">EMPTY</code>, <code class="language-plaintext highlighter-rouge">LOADING</code> or <code class="language-plaintext highlighter-rouge">DONE</code>.</p>
  </li>
  <li>
    <p><strong>result</strong>: The contents of the file that have been read. <em>(DOMString)</em></p>
  </li>
  <li>
    <p><strong>error</strong>: An object containing errors. <em>(FileError)</em></p>
  </li>
  <li>
    <p><strong>onloadstart</strong>: Called when the read starts. <em>(Function)</em></p>
  </li>
  <li>
    <p><strong>onload</strong>: Called when the read has successfully completed. <em>(Function)</em></p>
  </li>
  <li>
    <p><strong>onabort</strong>: Called when the read has been aborted. For instance, by invoking the <code class="language-plaintext highlighter-rouge">abort()</code> method. <em>(Function)</em></p>
  </li>
  <li>
    <p><strong>onerror</strong>: Called when the read has failed. <em>(Function)</em></p>
  </li>
  <li>
    <p><strong>onloadend</strong>: Called when the request has completed (either in success or failure).  <em>(Function)</em></p>
  </li>
</ul>

<p><strong>NOTE:</strong> The following porperty is not supported:</p>

<ul>
  <li><strong>onprogress</strong>: Called while reading the file, reporting progress in terms of <code class="language-plaintext highlighter-rouge">progress.loaded</code>/<code class="language-plaintext highlighter-rouge">progress.total</code>. <em>(Function)</em></li>
</ul>

<h2 id="methods">Methods</h2>

<ul>
  <li>
    <p><strong>abort</strong>: Aborts reading file.</p>
  </li>
  <li>
    <p><strong>readAsDataURL</strong>: Read file and return data as a base64-encoded data URL.</p>
  </li>
  <li>
    <p><strong>readAsText</strong>: Reads text file.</p>
  </li>
  <li>
    <p><strong>readAsBinaryString</strong>: Reads file as binary and returns a binary string.</p>
  </li>
  <li>
    <p><strong>readAsArrayBuffer</strong>: Reads file as an <code class="language-plaintext highlighter-rouge">ArrayBuffer</code>.</p>
  </li>
</ul>

<h2 id="details">Details</h2>

<p>The <code class="language-plaintext highlighter-rouge">FileReader</code> object offers a way to read files from the device’s
file system.  Files can be read as text or as a base64 data-encoded
string.  Event listeners receive the <code class="language-plaintext highlighter-rouge">loadstart</code>, <code class="language-plaintext highlighter-rouge">progress</code>, <code class="language-plaintext highlighter-rouge">load</code>,
<code class="language-plaintext highlighter-rouge">loadend</code>, <code class="language-plaintext highlighter-rouge">error</code>, and <code class="language-plaintext highlighter-rouge">abort</code> events.</p>

<h2 id="supported-platforms">Supported Platforms</h2>

<ul>
  <li>Android</li>
  <li>BlackBerry WebWorks (OS 5.0 and higher)</li>
  <li>iOS</li>
  <li>Windows Phone 7 and 8</li>
  <li>Windows 8</li>
</ul>

<h2 id="read-as-data-url">Read As Data URL</h2>

<p><strong>Parameters:</strong></p>

<ul>
  <li><strong>file</strong>: the file object to read.</li>
</ul>

<h2 id="quick-example">Quick <a href="../../storage/storage.opendatabase.html">Example</a></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function win(file) {
    var reader = new FileReader();
    reader.onloadend = function (evt) {
        console.log("read success");
        console.log(evt.target.result);
    };
    reader.readAsDataURL(file);
};

var fail = function (evt) {
    console.log(error.code);
};

entry.file(win, fail);
</code></pre></div></div>

<h2 id="read-as-text">Read As Text</h2>

<p><strong>Parameters:</strong></p>

<ul>
  <li>
    <p><strong>file</strong>: the file object to read.</p>
  </li>
  <li>
    <p><strong>encoding</strong>: the encoding to use to encode the file’s content. Default is UTF8.</p>
  </li>
</ul>

<h2 id="quick-example-1">Quick <a href="../../storage/storage.opendatabase.html">Example</a></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function win(file) {
    var reader = new FileReader();
    reader.onloadend = function (evt) {
        console.log("read success");
        console.log(evt.target.result);
    };
    reader.readAsText(file);
};

var fail = function (evt) {
    console.log(error.code);
};

entry.file(win, fail);
</code></pre></div></div>

<h2 id="abort-quick-example">Abort Quick <a href="../../storage/storage.opendatabase.html">Example</a></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function win(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("read success");
        console.log(evt.target.result);
    };
    reader.readAsText(file);
    reader.abort();
};

function fail(error) {
    console.log(error.code);
}

entry.file(win, fail);
</code></pre></div></div>

<h2 id="full-example">Full <a href="../../storage/storage.opendatabase.html">Example</a></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;FileReader Example&lt;/title&gt;

    &lt;script type="text/javascript" charset="utf-8" src="cordova.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" charset="utf-8"&gt;

    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //
    function onDeviceReady() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    }

    function gotFS(fileSystem) {
        fileSystem.root.getFile("readme.txt", null, gotFileEntry, fail);
    }

    function gotFileEntry(fileEntry) {
        fileEntry.file(gotFile, fail);
    }

    function gotFile(file){
        readDataUrl(file);
        readAsText(file);
    }

    function readDataUrl(file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as data URL");
            console.log(evt.target.result);
        };
        reader.readAsDataURL(file);
    }

    function readAsText(file) {
        var reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as text");
            console.log(evt.target.result);
        };
        reader.readAsText(file);
    }

    function fail(evt) {
        console.log(evt.target.error.code);
    }

    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Example&lt;/h1&gt;
    &lt;p&gt;Read File&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div></div>

<h2 id="ios-quirks">iOS Quirks</h2>

<ul>
  <li>The <strong>encoding</strong> parameter is not supported, and UTF8 encoding is always in effect.</li>
</ul>

<h2 id="read-as-binary-string">Read As Binary String</h2>

<p>Currently supported on iOS and Android only.</p>

<p><strong>Parameters:</strong></p>

<ul>
  <li><strong>file</strong>: the file object to read.</li>
</ul>

<h2 id="quick-example-2">Quick <a href="../../storage/storage.opendatabase.html">Example</a></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function win(file) {
    var reader = new FileReader();
    reader.onloadend = function (evt) {
        console.log("read success");
        console.log(evt.target.result);
    };
    reader.readAsBinaryString(file);
};

var fail = function (evt) {
    console.log(error.code);
};

entry.file(win, fail);
</code></pre></div></div>

<h2 id="read-as-array-buffer">Read As Array Buffer</h2>

<p>Currently supported on iOS and Android only.</p>

<p><strong>Parameters:</strong></p>

<ul>
  <li><strong>file</strong>:  the file object to read.</li>
</ul>

<h2 id="quick-example-3">Quick <a href="../../storage/storage.opendatabase.html">Example</a></h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function win(file) {
    var reader = new FileReader();
    reader.onloadend = function (evt) {
        console.log("read success");
        console.log(new Uint8Array(evt.target.result));
    };
    reader.readAsArrayBuffer(file);
};

var fail = function (evt) {
    console.log(error.code);
};

entry.file(win, fail);
</code></pre></div></div>
