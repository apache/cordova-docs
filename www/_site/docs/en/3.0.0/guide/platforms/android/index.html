<h1 id="android-platform-guide">Android Platform Guide</h1>

<p>This guide shows how to set up your SDK development environment to
deploy Cordova apps for Android devices. It walks you through the process
of installing the Android SDK, opening an Android project in Eclipse SDK, 
and deploying to an emulator or device. You will need to follow this guide 
to at least Install the Android SDK, regardless of which workflow you
are following. (Both the <em>Web Project Dev</em> and <em>Native Platform Dev</em> workflows
require the Android SDK to be installed and accessable via your PATH.)</p>

<p>See the following for more detailed platform-specific information:</p>

<ul>
  <li><a href="config.html">Android Configuration</a></li>
  <li><a href="webview.html">Android WebViews</a></li>
  <li><a href="plugin.html">Android Plugins</a></li>
  <li><a href="upgrading.html">Upgrading Android</a></li>
  <li><a href="tools.html">Android Command-line Tools</a></li>
</ul>

<p>The command-line tools above refer to versions prior to Cordova 3.0.
See The Command-Line Interface for information about the
current interface.</p>

<h2 id="requirements-and-support">Requirements and Support</h2>

<p>Cordova for Android requires the Android SDK. See the Android SDK’s
<a href="http://developer.android.com/sdk/index.html">System Requirements</a>.</p>

<p>Cordova supports Android 2.3.x (Gingerbread, starting with Android API level 10)
and 4.x.  As a general rule, Android versions become unsupported by Cordova as
they dip below 5% on Google’s
<a href="http://developer.android.com/about/dashboards/index.html">distribution dashboard</a>.
Android versions earlier than API level 10, and the 3.x versions (Honeycomb,
API levels 11-13) fall significantly below that 5% threshold.</p>

<!--
NOTE, doc said:
- Android 2.1 (Deprecated May 2013)
- Android 3.x (Deprecated May 2013)
-->

<p>Developers should use the <code class="language-plaintext highlighter-rouge">cordova</code> utility in conjunction with
the Android SDK.  See The Command-Line Interface for
information how to install it, add projects, then build and deploy a
project.</p>

<p>Install the Android SDK from
<a href="http://developer.android.com/sdk/">developer.android.com/sdk</a>. The android sdk
is distributed as an ‘adt-bundle-<os>-<arch>-<ver>' file.
On windows, the adt-bundle is packaged with an installer.
On OSX and Linux, simply unpack the 'adt-bundle' in the location you store development tools. 
[More detailed information on Android SDK setup can be found here](http://developer.android.com/sdk/installing/bundle.html)</ver></arch></os></p>

<p>For Cordova command-line tools to work, you need to include the SDK’s
<code class="language-plaintext highlighter-rouge">tools</code> and <code class="language-plaintext highlighter-rouge">platform-tools</code> directories in your PATH environment.  On
Mac, you can use a text editor to create or modify the
<code class="language-plaintext highlighter-rouge">~/.bash_profile</code> file, adding a line such as the following, depending
on where the SDK installs:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PATH=${PATH}:/Development/adt-bundle/sdk/platform-tools:/Development/adt-bundle/sdk/tools
</code></pre></div></div>

<p>This exposes SDK tools in newly opened terminal windows. Otherwise run
this to make them available in the current session:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ source ~/.bash_profile
</code></pre></div></div>

<p>To modify the PATH environment on Windows 7:</p>

<ul>
  <li>
    <p>Click on the <strong>Start</strong> menu in the lower-left corner of the desktop,
right-click on <strong>Computer</strong>, then click <strong>Properties</strong>.</p>
  </li>
  <li>
    <p>Click <strong>Advanced System Settings</strong> in the column on the left.</p>
  </li>
  <li>
    <p>In the resulting dialog box, press <strong>Environment Variables</strong>.</p>
  </li>
  <li>
    <p>Select the <strong>PATH</strong> variable and press <strong>Edit</strong>.</p>
  </li>
  <li>
    <p>Append the following to the PATH based on where you installed the
SDK, for example:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ;C:\Development\adt-bundle\sdk\platform-tools;C:\Development\adt-bundle\sdk\tools
</code></pre></div>    </div>
  </li>
  <li>
    <p>Save the value and <a href="../../../cordova/inappbrowser/inappbrowser.html">close</a> both dialog boxes.</p>
  </li>
</ul>

<p>You may also need to enable Java and Ant. Open a command prompt and
type <code class="language-plaintext highlighter-rouge">java</code>, and also type <code class="language-plaintext highlighter-rouge">ant</code>. Append to the PATH whichever fail to
run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    ;%JAVA_HOME%\bin;%ANT_HOME%\bin
</code></pre></div></div>

<h2 id="open-a-project-in-the-sdk">Open a Project in the SDK</h2>

<p>Use the <code class="language-plaintext highlighter-rouge">cordova</code> utility to set up a new project, as described in The
Cordova The Command-Line Interface. For example, in a source-code directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    $ cordova create hello com.example.hello "HelloWorld"
    $ cd hello
    $ cordova platform add android
    $ cordova build
</code></pre></div></div>

<p>Once created, here’s how to use the SDK to modify it:</p>

<ul>
  <li>
    <p>Launch the <strong>Eclipse</strong> application.</p>
  </li>
  <li>
    <p>Select the <strong>New Project</strong> menu item.</p>
  </li>
  <li>
    <p>Choose <strong>Android Project from Existing Code</strong> from the resulting dialog box, and press <strong>Next</strong>:
  <img src="/static/img/guide/platforms/android/eclipse_new_project.png" alt="" /></p>
  </li>
  <li>
    <p>Navigate to <code class="language-plaintext highlighter-rouge">hello</code>, or whichever directory you created for the project, then to the <code class="language-plaintext highlighter-rouge">platforms/android</code> subdirectory.</p>
  </li>
  <li>
    <p>Make sure both <code class="language-plaintext highlighter-rouge">hello</code> and <code class="language-plaintext highlighter-rouge">hello-CordovaLib</code> projects are selected to be imported. The <code class="language-plaintext highlighter-rouge">hello-CordovaLib</code> project is needed as of Cordova 3.3.0 because Cordova is now used as an Android Library instead of a .jar file.</p>
  </li>
  <li>
    <p>Press <strong>Finish</strong>.</p>
  </li>
</ul>

<p>Once the Eclipse window opens, a red <strong>X</strong> may appear to indicate
unresolved problems. If so, follow these additional steps:</p>

<ul>
  <li>
    <p>Right-click on the project directory.</p>
  </li>
  <li>
    <p>In the resulting <strong>Properties</strong> dialog, select <strong>Android</strong> from the navigation pane.</p>
  </li>
  <li>
    <p>For the project build target, select the highest Android API level you have installed.</p>
  </li>
  <li>
    <p>Click <strong>OK</strong>.</p>
  </li>
  <li>
    <p>Select <strong>Clean</strong> from the <strong>Project</strong> menu. This should correct all the errors in the project.</p>
  </li>
</ul>

<h2 id="deploy-to-emulator">Deploy to Emulator</h2>

<p>You can use the <code class="language-plaintext highlighter-rouge">cordova</code> utility to run an app in an emulator, or you
can run it within the SDK.  Either way, the SDK must first be
configured to display at least one device. To do so, use the Android
SDK Manager, a Java application that runs separately from Eclipse.
There are two ways to open it:</p>

<ul>
  <li>
    <p>Run <code class="language-plaintext highlighter-rouge">android</code> on the command line.</p>
  </li>
  <li>
    <p>From within Eclipse, press this toolbar icon:</p>

    <p><img src="/static/img/guide/platforms/android/eclipse_android_sdk_button.png" alt="" /></p>
  </li>
</ul>

<p>Once open, the Android SDK Manager displays various runtime libraries:</p>

<p><img src="/static/img/guide/platforms/android/asdk_window.png" alt="" /></p>

<p>Choose <strong>Tools → Manage AVDs</strong> (Android Virtual Devices), then
choose any item from <strong>Device Definitions</strong> in the resulting dialog
box:</p>

<p><img src="/static/img/guide/platforms/android/asdk_device.png" alt="" /></p>

<p>Press <strong>Create AVD</strong>, optionally modifying the name, then press <strong>OK</strong>
to accept the changes:</p>

<p><img src="/static/img/guide/platforms/android/asdk_newAVD.png" alt="" /></p>

<p>The AVD then appears in the <strong>Android Virtual Devices</strong> list:</p>

<p><img src="/static/img/guide/platforms/android/asdk_avds.png" alt="" /></p>

<p>To open the emulator as a separate application, select the AVD and
press <strong>Start</strong>. It launches much as it would on the device, with
additional controls available for hardware buttons:</p>

<p><img src="/static/img/guide/platforms/android/asdk_emulator.png" alt="" /></p>

<p>At this point you can use the <code class="language-plaintext highlighter-rouge">cordova</code> utility to deploy the
application to the emulator from the command line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    $ cordova emulate android
</code></pre></div></div>

<p>If instead you work within Eclipse, right-click the project and
choose <strong>Run As → Android Application</strong>. You may be asked to
specify an AVD if none are already open.</p>

<p>For a faster experience, use an Intel-based emulator image:</p>

<ul>
  <li>
    <p>Install one or more <code class="language-plaintext highlighter-rouge">Intel x86 Atom</code> System Images as well as the
<code class="language-plaintext highlighter-rouge">Intel Hardware Accelerated Execution Manager</code>, available under
<strong>Extras</strong>.</p>
  </li>
  <li>
    <p>Run the Intel installer, which is available within your Android SDK
at <code class="language-plaintext highlighter-rouge">extras/intel/Hardware_Accelerated_Execution_Manager</code>.</p>
  </li>
  <li>
    <p>Create a new AVD with the target set to an Intel image.</p>
  </li>
  <li>
    <p>When starting the emulator, ensure there are no error messages
indicating a failure to load HAX modules.</p>
  </li>
</ul>

<h2 id="deploy-to-device">Deploy to Device</h2>

<p>To push an app directly to the device, make sure USB debugging is
enabled on your device as described on the
<a href="http://developer.android.com/tools/device.html">Android Developer Site</a>,
and use a mini USB cable to plug it into your system.</p>

<p>You can push the app to the device from the command line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    $ cordova run android
</code></pre></div></div>

<p>Alternately within Eclipse, right-click the project and choose <strong>Run
As → Android Application</strong>.</p>
